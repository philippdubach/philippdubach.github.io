<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "en" }}">
{{ partial "head.html" . }}
<body class="linkblog">
    <div class="container">
        {{ partial "sidebar.html" . }}
        <main class="content">
            {{ partial "header.html" . }}
            {{ block "main" . }}{{ end }}
        </main>
    </div>
    {{ partial "footer.html" . }}
    
    {{- if .Param "math" -}}
        {{ partialCached "math.html" . }}
    {{- end -}}

    {{ if not hugo.IsServer }}
    <script>
      // Enhanced GoatCounter configuration to better track referrers from redirects
      window.goatcounter = window.goatcounter || {};
      // GoatCounter should automatically track referrers, but we ensure it's enabled
      // If referrer is from pdub.click, we can add additional tracking
      if (document.referrer && document.referrer.includes('pdub.click')) {
        // GoatCounter will automatically use document.referrer, but we can enhance it
        window.goatcounter.no_onload = false; // Ensure onload tracking works
      }
    </script>
    <script data-goatcounter="https://philippdubach.goatcounter.com/count"
            async src="https://gc.zgo.at/count.js"></script>
    {{ end }}
</body>
</html>