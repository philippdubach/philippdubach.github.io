<!doctype html><html lang=en-us><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=Content-Security-Policy content="default-src 'self'; script-src 'self' 'unsafe-inline' https://gc.zgo.at https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://philippdubach.goatcounter.com https://weekly-top-goatcounter-api.philippd.workers.dev https://gc.zgo.at https://pdub.click; frame-ancestors 'self'; base-uri 'self';"><link rel=preconnect href=https://gc.zgo.at crossorigin><link rel=preconnect href=https://static.philippdubach.com crossorigin><link rel=dns-prefetch href=https://gc.zgo.at><link rel=dns-prefetch href=https://static.philippdubach.com><meta name=robots content="index, follow"><title>YOURLS Installation Guide: Azure, AWS, Oracle - philippdubach.com</title><meta name=description content="Complete step-by-step guide to install and configure YOURLS (Your Own URL Shortener) on Azure, AWS, or Oracle Cloud using Ubuntu 22.04. Learn how to set up a free self-hosted URL shortener with Apache, MySQL, and SSL certificates."><meta name=keywords content="YOURLS,URL shortener,self-hosted URL shortener,Azure tutorial,AWS tutorial,Oracle Cloud,Ubuntu 22.04,YOURLS installation,free URL shortener,self-hosted,Apache MySQL PHP,Let's Encrypt SSL,cloud hosting,VM setup,URL shortening service,YOURLS configuration,web server setup,database configuration"><meta name=author content="Philipp Dubach"><meta name=generator content="Hugo 0.149.0"><link rel=canonical href=http://localhost:1313/standalone/yourls-azure-tutorial/><style>*{margin:0;padding:0;box-sizing:border-box}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}body{font-family:helvetica neue,Helvetica,Arial,segoe ui,sans-serif;padding-top:90px;line-height:1.6;color:#333;background-color:#ffff}blockquote{margin:1em 0;padding-left:1em;border-left:2px solid #ccc;color:#666}blockquote p{margin:.5em 0}.container{display:flex;max-width:1200px;margin:0 auto;min-height:100vh}.sidebar{width:200px;background-color:#ffff;padding:1.5rem;border-right:0 solid #e9ecef;position:sticky;top:0;height:100vh;overflow-y:auto}.site-title a{text-decoration:none;color:#333;font-size:1.5rem;font-weight:700}.site-description{color:#666;margin:.5rem 0 2rem;font-size:.9rem}.navigation ul{list-style:none;margin-bottom:2rem}.navigation li{margin-bottom:.5rem}.navigation a{text-decoration:none;color:#007acc;font-weight:500}.navigation a:hover{text-decoration:underline}.social-links a{display:inline-block;margin-right:1rem;color:#666;text-decoration:none;font-size:.9rem}.social-links a:hover{color:#007acc}.content{flex:1;padding:2rem;padding-bottom:3rem;max-width:800px}.posts{max-width:90%}.post{margin-bottom:1rem;padding-bottom:1rem}.post:last-child{border-bottom:none}.post-title{margin-bottom:.5rem;line-height:1.3}.post-title a{text-decoration:none;color:#333;font-size:1.25rem;font-weight:600;line-height:1.3}.post-title a:hover{color:#007acc}.post-meta{font-size:.85rem;color:#666;margin-bottom:0}.post-meta a{color:#007acc;text-decoration:none}.post-meta a:hover{text-decoration:underline}.post-content{line-height:1.7}.post-content p{margin-bottom:1rem}.post-content p:last-child{margin-bottom:.5rem}.post-content a{color:#007acc;text-decoration:none}.post-content a:hover{text-decoration:underline}.project-tag{background-color:#e9ecef;color:#495057;padding:2px 6px;border-radius:3px;font-size:9px;font-weight:500;text-transform:uppercase;letter-spacing:.3px;margin-left:6px;display:inline-block;vertical-align:middle;border:1px solid #dee2e6}.archive{max-width:90%}.year h2{margin:2rem 0 1rem;color:#333;font-size:1.5rem}.archive-item{display:flex;margin-bottom:.75rem;align-items:baseline}.archive-meta{width:60px;flex-shrink:0;font-size:.85rem;color:#666}.archive-title{flex:1}.archive-title a{text-decoration:none;color:#333}.archive-title a:hover{color:#007acc}@supports(text-wrap:balance){.archive-title{text-wrap:balance}}.single .post-title{font-size:1.5rem;margin-bottom:1rem;line-height:1.3}.pagination{margin-top:2rem;margin-bottom:1rem;text-align:center;padding-top:2rem;padding-bottom:1rem;border-top:1px solid #e9ecef}.pagination a{color:#007acc;text-decoration:none;font-weight:500}.pagination a:hover{text-decoration:underline}.img-lightbox{cursor:pointer;transition:opacity .2s}.img-lightbox:hover{opacity:.9}.lightbox-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#f8f9fa;z-index:9999;cursor:pointer;align-items:center;justify-content:center;padding:2rem;box-sizing:border-box}.lightbox-overlay:target{display:flex}.lightbox-overlay img{max-width:95%;max-height:95%;object-fit:contain;background:#f8f9fa}.feedback-footer{margin-top:.75rem;padding-top:.75rem;border-top:1px solid #e9ecef;text-align:center;color:#666;font-size:.9rem;margin-bottom:2rem}.feedback-footer p{margin:0;line-height:1.6}.feedback-footer a{color:#007acc;text-decoration:none}.feedback-footer a:hover{text-decoration:underline}@media screen and (max-width:768px){html{font-size:8px !important}body{font-size:1rem !important}.sidebar{width:100px !important;padding:.75rem !important}.container{max-width:600px !important;margin:0 20px !important}.content{max-width:400px !important;padding:1rem !important;padding-bottom:.5rem !important}.pagination{margin-bottom:1.5rem !important;padding-bottom:1.5rem !important}.project-tag{padding:1px 3px !important;border-radius:1.5px !important;font-size:4.5px !important;letter-spacing:.15px !important;margin-left:3px !important}.archive-meta{width:30px !important}.post-title,.post-title a,.single .post-title{line-height:1.2 !important}.post-content p:last-child{margin-bottom:.25rem !important}.feedback-footer{margin-top:.5rem !important;padding-top:.5rem !important;margin-bottom:1rem !important}}</style><link rel=icon type=image/png href=/icons/favicon-96x96.png sizes=96x96><link rel=icon type=image/svg+xml href=/icons/favicon.svg><link rel="shortcut icon" href=/icons/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-title content="philippdubach.com"><link rel=manifest href=/icons/site.webmanifest><meta name=theme-color content="#2c3e50"><meta name=msapplication-TileColor content="#2c3e50"><meta property="og:title" content="How to Install YOURLS: Free Self-Hosted URL Shortener on Azure, AWS, Oracle (Ubuntu 22.04)"><meta property="og:description" content="Complete step-by-step guide to install and configure YOURLS (Your Own URL Shortener) on Azure, AWS, or Oracle Cloud using Ubuntu 22.04. Learn how to set up a free self-hosted URL shortener with Apache, MySQL, and SSL certificates."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/standalone/yourls-azure-tutorial/"><meta property="og:site_name" content="philippdubach.com"><meta property="og:locale" content="en_US"><meta property="og:logo" content="http://localhost:1313/icons/favicon.ico"><meta property="og:image" content="https://static.philippdubach.com/ograph/ograph-yourls.jpg"><meta property="og:image:secure_url" content="https://static.philippdubach.com/ograph/ograph-yourls.jpg"><meta property="og:image:url" content="https://static.philippdubach.com/ograph/ograph-yourls.jpg"><meta property="og:image:type" content="image/jpeg"><meta property="article:published_time" content="0001-01-01T00:00:00Z"><meta property="article:modified_time" content="0001-01-01T00:00:00Z"><meta property="article:section" content="standalone"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="How to Install YOURLS: Free Self-Hosted URL Shortener on Azure, AWS, Oracle (Ubuntu 22.04)"><meta name=twitter:description content="Complete step-by-step guide to install and configure YOURLS (Your Own URL Shortener) on Azure, AWS, or Oracle Cloud using Ubuntu 22.04. Learn how to set up a free self-hosted URL shortener with Apache, MySQL, and SSL certificates."><meta name=twitter:image content="https://static.philippdubach.com/ograph/ograph-yourls.jpg"><meta name=twitter:image:src content="https://static.philippdubach.com/ograph/ograph-yourls.jpg"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"http:\/\/localhost:1313\/"},{"@type":"ListItem","position":2,"name":"Standalone","item":"http:\/\/localhost:1313\/standalone/"},{"@type":"ListItem","position":3,"name":"How to Install YOURLS: Free Self-Hosted URL Shortener on Azure, AWS, Oracle (Ubuntu 22.04)","item":"http:\/\/localhost:1313\/standalone\/yourls-azure-tutorial\/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"How to Install YOURLS: Free Self-Hosted URL Shortener on Azure, AWS, Oracle (Ubuntu 22.04)","name":"How to Install YOURLS: Free Self-Hosted URL Shortener on Azure, AWS, Oracle (Ubuntu 22.04)","description":"Complete step-by-step guide to install and configure YOURLS (Your Own URL Shortener) on Azure, AWS, or Oracle Cloud using Ubuntu 22.04. Learn how to set up a free self-hosted URL shortener with Apache, MySQL, and SSL certificates.","keywords":["YOURLS","URL shortener","self-hosted URL shortener","Azure tutorial","AWS tutorial","Oracle Cloud","Ubuntu 22.04","YOURLS installation","free URL shortener","self-hosted","Apache MySQL PHP","Let\u0027s Encrypt SSL","cloud hosting","VM setup","URL shortening service","YOURLS configuration","web server setup","database configuration"],"articleBody":"\"If you\\u0026rsquo;re tired of relying on third-party URL shorteners or just always wanted to host your own link shortener like me, YOURLS is a solid choice. It\\u0026rsquo;s a self-hosted PHP application that gives you your own URL shortening service, complete with analytics and custom short links.\\nThe setup is straightforward. You\\u0026rsquo;ll need a VM instance, a domain name pointing to it, and an SSL certificate. Most cloud providers offer free tier VMs that work perfectly for this. I went with Azure for this guide, but the steps are nearly identical for AWS or Oracle Cloud. Compare free tier options on the Cloud Free Tier Comparison List to see what fits your needs.\\nPrerequisites - A VM instance (Azure, AWS, Oracle Cloud, etc.)\\n- A domain name configured to point to your server\\n- SSL certificate (preferably) Step 1: Setting Up Your Azure Instance Create a Virtual Machine Log into the Azure Portal and navigate to \\u0026ldquo;Virtual Machines\\u0026rdquo; Click \\u0026ldquo;Create\\u0026rdquo; → \\u0026ldquo;Azure virtual machine\\u0026rdquo; Fill in the basic details: Subscription: Select your subscription Resource Group: Create new or use existing Virtual machine name: Choose a name (e.g., yourls-server) Region: Choose a region close to you Image: Select \\u0026ldquo;Ubuntu Server 22.04 LTS\\u0026rdquo; Size: For the free tier, select \\u0026ldquo;Standard_B1s\\u0026rdquo; (1 vCPU, 1 GiB RAM) Under \\u0026ldquo;Administrator account\\u0026rdquo;:\\nAuthentication type: SSH public key (recommended) or Password Username: Choose a username (e.g., azureuser) SSH public key source: Generate new key pair or use existing Under \\u0026ldquo;Inbound port rules\\u0026rdquo;:\\nPublic inbound ports: Allow selected ports Select inbound ports: SSH (22), HTTP (80), HTTPS (443) Review and create the VM. This may take a few minutes. Connect to Your Server Once your VM is created, you can connect via SSH:\\nssh azureuser@YOUR_VM_PUBLIC_IP Replace YOUR_VM_PUBLIC_IP with the public IP address shown in the Azure portal.\\nUpdate System Packages Once connected, update your system:\\nsudo apt update \\u0026amp;\\u0026amp; sudo apt upgrade -y Now that your server is ready, let\\u0026rsquo;s get the web stack installed. YOURLS needs Apache, MySQL, and PHP to run properly.\\nStep 2: Install Required Software Install Apache, MySQL/MariaDB, and PHP:\\nInstall Apache sudo apt install apache2 -y sudo systemctl enable apache2 sudo systemctl start apache2 Install MySQL sudo apt install mysql-server -y sudo systemctl enable mysql sudo systemctl start mysql Secure your MySQL installation:\\nsudo mysql_secure_installation Follow the prompts to set a root password and configure security settings.\\nInstall PHP and Required Extensions sudo apt install php php-mysql php-curl php-mbstring php-xml php-gd php-zip -y Verify PHP installation:\\nphp -v You should see PHP 8.1 or later.\\nWith all the software installed, we need to enable a few Apache modules that YOURLS depends on for URL rewriting and SSL.\\nStep 3: Configure Apache Modules Enable the required Apache modules for YOURLS:\\nsudo a2enmod rewrite sudo a2enmod ssl sudo a2enmod headers sudo systemctl restart apache2 Verify Services Check that all services are running:\\n# Check Apache status sudo systemctl status apache2 # Check MySQL status sudo systemctl status mysql Everything should be running smoothly now. Time to grab the YOURLS files and get them set up on your server.\\nStep 4: Download YOURLS Download the latest YOURLS release:\\ncd ~ wget https://github.com/YOURLS/YOURLS/archive/1.10.2.tar.gz -O yourls-1.10.2.tar.gz tar -xzf yourls-1.10.2.tar.gz Step 5: Set Up Web Directory Create a directory for your domain and copy YOURLS files:\\n# Create web directory for your domain sudo mkdir -p /var/www/yourdomain.com # Copy YOURLS files to web directory sudo cp -r ~/YOURLS-1.10.2/* /var/www/yourdomain.com/ # Ensure user directory exists sudo mkdir -p /var/www/yourdomain.com/user Before we configure YOURLS, we need to set up the database. YOURLS stores all your links and stats in MySQL, so let\\u0026rsquo;s create a dedicated database and user for it.\\nStep 6: Create MySQL Database and User Generate Secure Password # Generate a secure random password DB_PASS=$(openssl rand -base64 32 | tr -d \\u0026#34;=+/\\u0026#34; | cut -c1-25) echo \\u0026#34;DB_PASS=$DB_PASS\\u0026#34; \\u0026gt; /tmp/yourls_db_pass.txt Important: Save this password securely - you\\u0026rsquo;ll need it for the configuration file.\\nCreate Database and User # Read the password DB_PASS=$(cat /tmp/yourls_db_pass.txt | cut -d= -f2) # Create database and user sudo mysql -e \\u0026#34;CREATE DATABASE IF NOT EXISTS yourls_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\\u0026#34; sudo mysql -e \\u0026#34;CREATE USER IF NOT EXISTS \\u0026#39;yourls_user\\u0026#39;@\\u0026#39;localhost\\u0026#39; IDENTIFIED BY \\u0026#39;$DB_PASS\\u0026#39;;\\u0026#34; sudo mysql -e \\u0026#34;GRANT ALL PRIVILEGES ON yourls_db.* TO \\u0026#39;yourls_user\\u0026#39;@\\u0026#39;localhost\\u0026#39;;\\u0026#34; sudo mysql -e \\u0026#34;FLUSH PRIVILEGES;\\u0026#34; Step 7: Generate Security Keys Generate a cookie encryption key and an admin password:\\nGenerate Cookie Key COOKIE_KEY=$(openssl rand -base64 48 | tr -d \\u0026#34;=+/\\u0026#34; | cut -c1-64) echo \\u0026#34;COOKIE_KEY=$COOKIE_KEY\\u0026#34; Generate Admin Password ADMIN_PASS=$(openssl rand -base64 32 | tr -d \\u0026#34;=+/\\u0026#34; | cut -c1-25) echo \\u0026#34;ADMIN_PASS=$ADMIN_PASS\\u0026#34; Important: Save both the cookie key and admin password securely. You\\u0026rsquo;ll need them to log into the admin panel.\\nNow create the configuration file that tells YOURLS how to connect to the database.\\nStep 8: Create Configuration File sudo nano /var/www/yourdomain.com/user/config.php Or create it directly with a here-document:\\nsudo tee /var/www/yourdomain.com/user/config.php \\u0026gt; /dev/null \\u0026lt;\\u0026lt; \\u0026#39;EOFCONFIG\\u0026#39; \\u0026lt;?php /* ** MySQL settings - You can get this info from your web host */ /** MySQL database username */ define( \\u0026#39;YOURLS_DB_USER\\u0026#39;, \\u0026#39;yourls_user\\u0026#39; ); /** MySQL database password */ define( \\u0026#39;YOURLS_DB_PASS\\u0026#39;, \\u0026#39;YOUR_DB_PASSWORD_HERE\\u0026#39; ); /** The name of the database for YOURLS */ define( \\u0026#39;YOURLS_DB_NAME\\u0026#39;, \\u0026#39;yourls_db\\u0026#39; ); /** MySQL hostname. */ define( \\u0026#39;YOURLS_DB_HOST\\u0026#39;, \\u0026#39;localhost\\u0026#39; ); /** MySQL tables prefix */ define( \\u0026#39;YOURLS_DB_PREFIX\\u0026#39;, \\u0026#39;yourls_\\u0026#39; ); /* ** Site options */ /** YOURLS installation URL */ define( \\u0026#39;YOURLS_SITE\\u0026#39;, \\u0026#39;https://yourdomain.com\\u0026#39; ); /** YOURLS language */ define( \\u0026#39;YOURLS_LANG\\u0026#39;, \\u0026#39;\\u0026#39; ); /** Allow multiple short URLs for a same long URL */ define( \\u0026#39;YOURLS_UNIQUE_URLS\\u0026#39;, true ); /** Private means the Admin area will be protected with login/pass */ define( \\u0026#39;YOURLS_PRIVATE\\u0026#39;, true ); /** A random secret hash used to encrypt cookies */ define( \\u0026#39;YOURLS_COOKIEKEY\\u0026#39;, \\u0026#39;YOUR_COOKIE_KEY_HERE\\u0026#39; ); /** Username(s) and password(s) allowed to access the site */ $yourls_user_passwords = [ \\u0026#39;admin\\u0026#39; =\\u0026gt; \\u0026#39;YOUR_ADMIN_PASSWORD_HERE\\u0026#39;, ]; /** URL shortening method: either 36 or 62 */ define( \\u0026#39;YOURLS_URL_CONVERT\\u0026#39;, 36 ); /** Debug mode */ define( \\u0026#39;YOURLS_DEBUG\\u0026#39;, false ); /** * Reserved keywords */ $yourls_reserved_URL = [ \\u0026#39;porn\\u0026#39;, \\u0026#39;faggot\\u0026#39;, \\u0026#39;sex\\u0026#39;, \\u0026#39;nigger\\u0026#39;, \\u0026#39;fuck\\u0026#39;, \\u0026#39;cunt\\u0026#39;, \\u0026#39;dick\\u0026#39;, ]; EOFCONFIG Replace the placeholders with your actual values:\\nDB_PASS=$(cat /tmp/yourls_db_pass.txt | cut -d= -f2) sudo sed -i \\u0026#34;s|YOUR_DB_PASSWORD_HERE|$DB_PASS|\\u0026#34; /var/www/yourdomain.com/user/config.php sudo sed -i \\u0026#34;s|YOUR_COOKIE_KEY_HERE|$COOKIE_KEY|\\u0026#34; /var/www/yourdomain.com/user/config.php sudo sed -i \\u0026#34;s|YOUR_ADMIN_PASSWORD_HERE|$ADMIN_PASS|\\u0026#34; /var/www/yourdomain.com/user/config.php sudo sed -i \\u0026#34;s|https://yourdomain.com|https://yourdomain.com|\\u0026#34; /var/www/yourdomain.com/user/config.php Note: Replace yourdomain.com with your actual domain name in the last command and in the config file.\\nStep 9: Set File Permissions # Set ownership to web server user sudo chown -R www-data:www-data /var/www/yourdomain.com # Set directory permissions sudo chmod -R 755 /var/www/yourdomain.com # Set config file permissions (readable but secure) sudo chmod 644 /var/www/yourdomain.com/user/config.php # Make plugins directory writable for future plugin installations sudo chmod -R 775 /var/www/yourdomain.com/user/plugins Step 10: Create .htaccess File sudo tee /var/www/yourdomain.com/.htaccess \\u0026gt; /dev/null \\u0026lt;\\u0026lt; \\u0026#39;EOFHTACCESS\\u0026#39; # BEGIN YOURLS \\u0026lt;IfModule mod_rewrite.c\\u0026gt; RewriteEngine On RewriteBase / RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d RewriteRule ^.*$ /yourls-loader.php [L] \\u0026lt;/IfModule\\u0026gt; # END YOURLS EOFHTACCESS sudo chown www-data:www-data /var/www/yourdomain.com/.htaccess sudo chmod 644 /var/www/yourdomain.com/.htaccess Next up, we need to configure Apache to serve your domain. This involves setting up virtual hosts for both HTTP and HTTPS.\\nStep 11: Configure Apache Virtual Host Create HTTP Virtual Host (Port 80) sudo nano /etc/apache2/sites-available/yourdomain.com.conf Add the following content:\\n\\u0026lt;VirtualHost *:80\\u0026gt; ServerAdmin webmaster@yourdomain.com ServerName yourdomain.com DocumentRoot /var/www/html # Redirect HTTP to HTTPS Redirect permanent / https://yourdomain.com/ ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined \\u0026lt;/VirtualHost\\u0026gt; Create HTTPS Virtual Host (Port 443) sudo nano /etc/apache2/sites-available/yourdomain.com-ssl.conf Add the following content:\\n\\u0026lt;VirtualHost *:443\\u0026gt; ServerAdmin webmaster@yourdomain.com ServerName yourdomain.com ServerAlias www.yourdomain.com # SSL Configuration SSLEngine on SSLCertificateFile /path/to/your/certificate.crt SSLCertificateKeyFile /path/to/your/private.key # SSLCertificateChainFile /path/to/chain.pem # If applicable DocumentRoot /var/www/yourdomain.com \\u0026lt;Directory /var/www/yourdomain.com\\u0026gt; Options -Indexes +FollowSymLinks AllowOverride All Require all granted \\u0026lt;/Directory\\u0026gt; ErrorLog ${APACHE_LOG_DIR}/yourdomain.com-error.log CustomLog ${APACHE_LOG_DIR}/yourdomain.com-access.log combined \\u0026lt;/VirtualHost\\u0026gt; Enable Sites sudo a2ensite yourdomain.com.conf sudo a2ensite yourdomain.com-ssl.conf Step 12: SSL Certificate Setup You have two main options for SSL certificates:\\nOption A: Using Let\\u0026rsquo;s Encrypt (Recommended - Free) Let\\u0026rsquo;s Encrypt provides free SSL certificates with auto-renewal:\\nsudo apt install certbot python3-certbot-apache -y sudo certbot --apache -d yourdomain.com -d www.yourdomain.com Certbot will automatically configure Apache with SSL and set up auto-renewal.\\nOption B: Using a Commercial SSL Certificate If using a commercial SSL certificate from your domain registrar:\\nUpload your certificate files to the server Update the SSL paths in /etc/apache2/sites-available/yourdomain.com-ssl.conf: SSLCertificateFile: Path to your certificate file SSLCertificateKeyFile: Path to your private key file SSLCertificateChainFile: Path to your chain file (if provided) Once SSL is configured, test Apache before pointing DNS to the server.\\nStep 13: Test and Start Apache # Test Apache configuration sudo apache2ctl configtest If the test passes:\\n# Restart Apache sudo systemctl restart apache2 # Enable Apache to start on boot sudo systemctl enable apache2 # Check status sudo systemctl status apache2 Apache is configured and running. Point your domain to this server to access YOURLS.\\nStep 14: Configure DNS Log into your domain registrar\\u0026rsquo;s DNS management panel\\nCreate an A record pointing your domain to your Azure VM\\u0026rsquo;s public IP address:\\nType: A Name: @ (or yourdomain.com) Value: YOUR_VM_PUBLIC_IP TTL: 3600 (or default) Optionally, create a CNAME record for www:\\nType: CNAME Name: www Value: yourdomain.com TTL: 3600 DNS propagation can take anywhere from a few minutes to 48 hours, though it\\u0026rsquo;s usually much faster.\\nStep 15: Verify Installation Once DNS has propagated:\\nTest Database Connection DB_PASS=$(cat /tmp/yourls_db_pass.txt | cut -d= -f2) mysql -u yourls_user -p\\u0026#34;$DB_PASS\\u0026#34; -h localhost yourls_db -e \\u0026#34;SELECT 1;\\u0026#34; If this runs without errors, your database connection is working.\\nAccess Admin Panel Open your browser and navigate to: https://yourdomain.com/admin/ You should see the YOURLS setup page Run the automatic installation Reload the page\\nLogin with:\\nUsername: admin (or whatever you set in config.php) Password: The admin password you generated in Step 7 Test Creating a Short URL Once logged in, create a short URL to verify everything works:\\nEnter a long URL in the \\u0026ldquo;Enter a URL\\u0026rdquo; field Optionally, specify a custom keyword Click \\u0026ldquo;Shorten The URL\\u0026rdquo; Troubleshooting Apache Returns 403 Forbidden Check file permissions: sudo chown -R www-data:www-data /var/www/yourdomain.com Verify AllowOverride All is set in Apache config Check Apache error logs: sudo tail -f /var/log/apache2/error.log Database Connection Errors Verify database exists: sudo mysql -e \\u0026quot;SHOW DATABASES;\\u0026quot; Check user permissions: sudo mysql -e \\u0026quot;SHOW GRANTS FOR 'yourls_user'@'localhost';\\u0026quot; Verify password in config.php matches the database user password SSL Certificate Issues Ensure mod_ssl is enabled: sudo a2enmod ssl Check certificate paths are correct Verify certificate files are readable: sudo ls -la /path/to/certificate For Let\\u0026rsquo;s Encrypt, check renewal: sudo certbot renew --dry-run Short URLs Not Working Verify mod_rewrite is enabled: sudo a2enmod rewrite Check .htaccess file exists and has correct permissions Ensure AllowOverride All is set in Apache Directory directive Check Apache error logs for specific rewrite errors Can\\u0026rsquo;t Access Site After DNS Change Verify DNS propagation: dig yourdomain.com or use online DNS checkers Check that your firewall allows HTTP (80) and HTTPS (443) traffic Verify Apache is running: sudo systemctl status apache2 Check that your virtual hosts are enabled: sudo apache2ctl -S Security Best Practices Keep credentials secure: Store database passwords and admin credentials in a password manager Regular updates: Keep YOURLS, PHP, Apache, and MySQL updated: sudo apt update \\u0026amp;\\u0026amp; sudo apt upgrade -y Backup regularly: Set up automated backups for your database and config files File permissions: Never make config.php world-writable (644 is sufficient) Firewall: Configure Azure Network Security Groups to only allow necessary ports SSH security: Consider disabling password authentication and using SSH keys only File Locations Summary YOURLS Installation: /var/www/yourdomain.com/ Configuration File: /var/www/yourdomain.com/user/config.php Apache Config (HTTP): /etc/apache2/sites-available/yourdomain.com.conf Apache Config (HTTPS): /etc/apache2/sites-available/yourdomain.com-ssl.conf .htaccess: /var/www/yourdomain.com/.htaccess Database: yourls_db (MySQL) Database User: yourls_user@localhost Next Steps Now that everything is working, here\\u0026rsquo;s what you can do next:\\nLog into the admin panel at https://yourdomain.com/admin/ Test creating a short URL Customize your YOURLS installation with plugins from the YOURLS plugin directory Set up regular backups (consider automating with cron jobs) Monitor your installation for security updates Configure analytics if desired Set up email notifications for new short URLs (if using plugins) Conclusion That\\u0026rsquo;s it. You\\u0026rsquo;ve got your own URL shortener running. YOURLS is flexible once you start digging into plugins and customization. Since we\\u0026rsquo;re using free tier VMs, this setup costs nothing to run, perfect for personal projects or small teams.\\nKeep everything updated and set up backups. The last thing you want is losing all your links because you forgot to back up the database.\\nReferences YOURLS Official Website YOURLS Documentation YOURLS GitHub Repository Azure Free Tier Documentation Let\\u0026rsquo;s Encrypt Documentation \"","wordCount":2050,"inLanguage":"en","image":"https:\/\/static.philippdubach.com\/ograph\/ograph-yourls.jpg","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/localhost:1313\/standalone\/yourls-azure-tutorial\/"},"publisher":{"@type":"Organization","name":"philippdubach","logo":{"@type":"ImageObject","url":"http:\/\/localhost:1313\/icons/favicon.ico"}},"author":{"@type":"Person","name":"Philipp Dubach"}}</script></head><body class=linkblog><div class=container><aside class=sidebar><div class=sidebar-content><div class=site-header><div class=site-title><a href=http://localhost:1313/>philippdubach</a></div><p class=site-description>Blog about Personal Projects, Articles and Papers on Economics, Finance and Technology</p></div><nav class=navigation><ul><li><a href=/>Home</a></li><li><a href=/projects/>Projects</a></li><li><a href=/posts/>Archive</a></li><li><a href=/about/>About</a></li><li><a href=/index.xml>RSS</a></li></ul></nav><div class=social-links><a href=https://github.com/philippdubach target=_blank rel=noopener>GitHub</a>
<a href=mailto:info@philippdubach.com>Email</a></div></div></aside><main class=content><article class="post single"><header class=post-header><h1 class=post-title>How to Install YOURLS: Free Self-Hosted URL Shortener on Azure, AWS, Oracle (Ubuntu 22.04)</h1></header><div class=post-content><p>If you&rsquo;re tired of relying on third-party URL shorteners or just always wanted to host your own link shortener like me, <a href=https://yourls.org>YOURLS</a> is a solid choice. It&rsquo;s a self-hosted PHP application that gives you your own URL shortening service, complete with analytics and custom short links.</p><p>The setup is straightforward. You&rsquo;ll need a VM instance, a domain name pointing to it, and an SSL certificate. Most cloud providers offer free tier VMs that work perfectly for this. I went with Azure for this guide, but the steps are nearly identical for AWS or Oracle Cloud. Compare free tier options on the <a href="https://github.com/cloudcommunity/Cloud-Free-Tier-Comparison?tab=readme-ov-file#1-aws">Cloud Free Tier Comparison List</a> to see what fits your needs.</p><details><summary>Prerequisites</summary>- A VM instance (Azure, AWS, Oracle Cloud, etc.)<br>- A domain name configured to point to your server<br>- SSL certificate (preferably)</details><br><h2 id=step-1-setting-up-your-azure-instance>Step 1: Setting Up Your Azure Instance</h2><h3 id=create-a-virtual-machine>Create a Virtual Machine</h3><ol><li>Log into the <a href=https://portal.azure.com>Azure Portal</a> and navigate to &ldquo;Virtual Machines&rdquo;</li><li>Click &ldquo;Create&rdquo; → &ldquo;Azure virtual machine&rdquo;</li></ol><a href=#lightbox-azure-tutorial-screen1-jpg-0 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/azure-tutorial-screen1.jpg 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/azure-tutorial-screen1.jpg 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/azure-tutorial-screen1.jpg 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/azure-tutorial-screen1.jpg 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/azure-tutorial-screen1.jpg 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/azure-tutorial-screen1.jpg 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/azure-tutorial-screen1.jpg 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/azure-tutorial-screen1.jpg 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/azure-tutorial-screen1.jpg" alt=alt loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-azure-tutorial-screen1-jpg-0 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/azure-tutorial-screen1.jpg" alt=alt></a><ol start=3><li>Fill in the basic details:<ul><li><strong>Subscription</strong>: Select your subscription</li><li><strong>Resource Group</strong>: Create new or use existing</li><li><strong>Virtual machine name</strong>: Choose a name (e.g., <code>yourls-server</code>)</li><li><strong>Region</strong>: Choose a region close to you</li><li><strong>Image</strong>: Select &ldquo;Ubuntu Server 22.04 LTS&rdquo;</li><li><strong>Size</strong>: For the free tier, select &ldquo;Standard_B1s&rdquo; (1 vCPU, 1 GiB RAM)</li></ul></li></ol><a href=#lightbox-azure-tutorial-screen2-jpg-1 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/azure-tutorial-screen2.jpg 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/azure-tutorial-screen2.jpg 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/azure-tutorial-screen2.jpg 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/azure-tutorial-screen2.jpg 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/azure-tutorial-screen2.jpg 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/azure-tutorial-screen2.jpg 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/azure-tutorial-screen2.jpg 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/azure-tutorial-screen2.jpg 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/azure-tutorial-screen2.jpg" alt=alt loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-azure-tutorial-screen2-jpg-1 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/azure-tutorial-screen2.jpg" alt=alt></a><ol start=4><li><p>Under &ldquo;Administrator account&rdquo;:</p><ul><li><strong>Authentication type</strong>: SSH public key (recommended) or Password</li><li><strong>Username</strong>: Choose a username (e.g., <code>azureuser</code>)</li><li><strong>SSH public key source</strong>: Generate new key pair or use existing</li></ul></li><li><p>Under &ldquo;Inbound port rules&rdquo;:</p><ul><li><strong>Public inbound ports</strong>: Allow selected ports</li><li><strong>Select inbound ports</strong>: SSH (22), HTTP (80), HTTPS (443)</li></ul></li></ol><a href=#lightbox-azure-tutorial-screen3-jpg-2 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/azure-tutorial-screen3.jpg 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/azure-tutorial-screen3.jpg 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/azure-tutorial-screen3.jpg 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/azure-tutorial-screen3.jpg 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/azure-tutorial-screen3.jpg 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/azure-tutorial-screen3.jpg 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/azure-tutorial-screen3.jpg 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/azure-tutorial-screen3.jpg 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/azure-tutorial-screen3.jpg" alt=alt loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-azure-tutorial-screen3-jpg-2 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/azure-tutorial-screen3.jpg" alt=alt></a><ol start=6><li>Review and create the VM. This may take a few minutes.</li></ol><h3 id=connect-to-your-server>Connect to Your Server</h3><p>Once your VM is created, you can connect via SSH:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh azureuser@YOUR_VM_PUBLIC_IP
</span></span></code></pre></div><p>Replace <code>YOUR_VM_PUBLIC_IP</code> with the public IP address shown in the Azure portal.</p><h3 id=update-system-packages>Update System Packages</h3><p>Once connected, update your system:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt upgrade -y
</span></span></code></pre></div><p>Now that your server is ready, let&rsquo;s get the web stack installed. YOURLS needs Apache, MySQL, and PHP to run properly.</p><h2 id=step-2-install-required-software>Step 2: Install Required Software</h2><p>Install Apache, MySQL/MariaDB, and PHP:</p><h3 id=install-apache>Install Apache</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install apache2 -y
</span></span><span style=display:flex><span>sudo systemctl enable apache2
</span></span><span style=display:flex><span>sudo systemctl start apache2
</span></span></code></pre></div><h3 id=install-mysql>Install MySQL</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install mysql-server -y
</span></span><span style=display:flex><span>sudo systemctl enable mysql
</span></span><span style=display:flex><span>sudo systemctl start mysql
</span></span></code></pre></div><p>Secure your MySQL installation:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mysql_secure_installation
</span></span></code></pre></div><p>Follow the prompts to set a root password and configure security settings.</p><h3 id=install-php-and-required-extensions>Install PHP and Required Extensions</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install php php-mysql php-curl php-mbstring php-xml php-gd php-zip -y
</span></span></code></pre></div><p>Verify PHP installation:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>php -v
</span></span></code></pre></div><p>You should see PHP 8.1 or later.</p><p>With all the software installed, we need to enable a few Apache modules that YOURLS depends on for URL rewriting and SSL.</p><h2 id=step-3-configure-apache-modules>Step 3: Configure Apache Modules</h2><p>Enable the required Apache modules for YOURLS:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo a2enmod rewrite
</span></span><span style=display:flex><span>sudo a2enmod ssl
</span></span><span style=display:flex><span>sudo a2enmod headers
</span></span><span style=display:flex><span>sudo systemctl restart apache2
</span></span></code></pre></div><h3 id=verify-services>Verify Services</h3><p>Check that all services are running:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Check Apache status</span>
</span></span><span style=display:flex><span>sudo systemctl status apache2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check MySQL status</span>
</span></span><span style=display:flex><span>sudo systemctl status mysql
</span></span></code></pre></div><p>Everything should be running smoothly now. Time to grab the YOURLS files and get them set up on your server.</p><h2 id=step-4-download-yourls>Step 4: Download YOURLS</h2><p>Download the latest YOURLS release:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~
</span></span><span style=display:flex><span>wget https://github.com/YOURLS/YOURLS/archive/1.10.2.tar.gz -O yourls-1.10.2.tar.gz
</span></span><span style=display:flex><span>tar -xzf yourls-1.10.2.tar.gz
</span></span></code></pre></div><h2 id=step-5-set-up-web-directory>Step 5: Set Up Web Directory</h2><p>Create a directory for your domain and copy YOURLS files:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Create web directory for your domain</span>
</span></span><span style=display:flex><span>sudo mkdir -p /var/www/yourdomain.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Copy YOURLS files to web directory</span>
</span></span><span style=display:flex><span>sudo cp -r ~/YOURLS-1.10.2/* /var/www/yourdomain.com/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Ensure user directory exists</span>
</span></span><span style=display:flex><span>sudo mkdir -p /var/www/yourdomain.com/user
</span></span></code></pre></div><p>Before we configure YOURLS, we need to set up the database. YOURLS stores all your links and stats in MySQL, so let&rsquo;s create a dedicated database and user for it.</p><h2 id=step-6-create-mysql-database-and-user>Step 6: Create MySQL Database and User</h2><h3 id=generate-secure-password>Generate Secure Password</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Generate a secure random password</span>
</span></span><span style=display:flex><span>DB_PASS<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>openssl rand -base64 <span style=color:#ae81ff>32</span> | tr -d <span style=color:#e6db74>&#34;=+/&#34;</span> | cut -c1-25<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;DB_PASS=</span>$DB_PASS<span style=color:#e6db74>&#34;</span> &gt; /tmp/yourls_db_pass.txt
</span></span></code></pre></div><p><strong>Important</strong>: Save this password securely - you&rsquo;ll need it for the configuration file.</p><h3 id=create-database-and-user>Create Database and User</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Read the password</span>
</span></span><span style=display:flex><span>DB_PASS<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>cat /tmp/yourls_db_pass.txt | cut -d<span style=color:#f92672>=</span> -f2<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create database and user</span>
</span></span><span style=display:flex><span>sudo mysql -e <span style=color:#e6db74>&#34;CREATE DATABASE IF NOT EXISTS yourls_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;&#34;</span>
</span></span><span style=display:flex><span>sudo mysql -e <span style=color:#e6db74>&#34;CREATE USER IF NOT EXISTS &#39;yourls_user&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;</span>$DB_PASS<span style=color:#e6db74>&#39;;&#34;</span>
</span></span><span style=display:flex><span>sudo mysql -e <span style=color:#e6db74>&#34;GRANT ALL PRIVILEGES ON yourls_db.* TO &#39;yourls_user&#39;@&#39;localhost&#39;;&#34;</span>
</span></span><span style=display:flex><span>sudo mysql -e <span style=color:#e6db74>&#34;FLUSH PRIVILEGES;&#34;</span>
</span></span></code></pre></div><h2 id=step-7-generate-security-keys>Step 7: Generate Security Keys</h2><p>Generate a cookie encryption key and an admin password:</p><h3 id=generate-cookie-key>Generate Cookie Key</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>COOKIE_KEY<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>openssl rand -base64 <span style=color:#ae81ff>48</span> | tr -d <span style=color:#e6db74>&#34;=+/&#34;</span> | cut -c1-64<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;COOKIE_KEY=</span>$COOKIE_KEY<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h3 id=generate-admin-password>Generate Admin Password</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ADMIN_PASS<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>openssl rand -base64 <span style=color:#ae81ff>32</span> | tr -d <span style=color:#e6db74>&#34;=+/&#34;</span> | cut -c1-25<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;ADMIN_PASS=</span>$ADMIN_PASS<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><p><strong>Important</strong>: Save both the cookie key and admin password securely. You&rsquo;ll need them to log into the admin panel.</p><p>Now create the configuration file that tells YOURLS how to connect to the database.</p><h2 id=step-8-create-configuration-file>Step 8: Create Configuration File</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo nano /var/www/yourdomain.com/user/config.php
</span></span></code></pre></div><p>Or create it directly with a here-document:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo tee /var/www/yourdomain.com/user/config.php &gt; /dev/null <span style=color:#e6db74>&lt;&lt; &#39;EOFCONFIG&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;?php
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/*
</span></span></span><span style=display:flex><span><span style=color:#e6db74> ** MySQL settings - You can get this info from your web host
</span></span></span><span style=display:flex><span><span style=color:#e6db74> */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** MySQL database username */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_DB_USER&#39;, &#39;yourls_user&#39; );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** MySQL database password */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_DB_PASS&#39;, &#39;YOUR_DB_PASSWORD_HERE&#39; );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** The name of the database for YOURLS */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_DB_NAME&#39;, &#39;yourls_db&#39; );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** MySQL hostname. */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_DB_HOST&#39;, &#39;localhost&#39; );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** MySQL tables prefix */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_DB_PREFIX&#39;, &#39;yourls_&#39; );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/*
</span></span></span><span style=display:flex><span><span style=color:#e6db74> ** Site options
</span></span></span><span style=display:flex><span><span style=color:#e6db74> */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** YOURLS installation URL */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_SITE&#39;, &#39;https://yourdomain.com&#39; );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** YOURLS language */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_LANG&#39;, &#39;&#39; );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** Allow multiple short URLs for a same long URL */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_UNIQUE_URLS&#39;, true );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** Private means the Admin area will be protected with login/pass */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_PRIVATE&#39;, true );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** A random secret hash used to encrypt cookies */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_COOKIEKEY&#39;, &#39;YOUR_COOKIE_KEY_HERE&#39; );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** Username(s) and password(s) allowed to access the site */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>$yourls_user_passwords = [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	&#39;admin&#39; =&gt; &#39;YOUR_ADMIN_PASSWORD_HERE&#39;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>];
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** URL shortening method: either 36 or 62 */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_URL_CONVERT&#39;, 36 );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/** Debug mode */
</span></span></span><span style=display:flex><span><span style=color:#e6db74>define( &#39;YOURLS_DEBUG&#39;, false );
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74>* Reserved keywords
</span></span></span><span style=display:flex><span><span style=color:#e6db74>*/
</span></span></span><span style=display:flex><span><span style=color:#e6db74>$yourls_reserved_URL = [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>	&#39;porn&#39;, &#39;faggot&#39;, &#39;sex&#39;, &#39;nigger&#39;, &#39;fuck&#39;, &#39;cunt&#39;, &#39;dick&#39;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>];
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOFCONFIG</span>
</span></span></code></pre></div><p>Replace the placeholders with your actual values:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>DB_PASS<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>cat /tmp/yourls_db_pass.txt | cut -d<span style=color:#f92672>=</span> -f2<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>sudo sed -i <span style=color:#e6db74>&#34;s|YOUR_DB_PASSWORD_HERE|</span>$DB_PASS<span style=color:#e6db74>|&#34;</span> /var/www/yourdomain.com/user/config.php
</span></span><span style=display:flex><span>sudo sed -i <span style=color:#e6db74>&#34;s|YOUR_COOKIE_KEY_HERE|</span>$COOKIE_KEY<span style=color:#e6db74>|&#34;</span> /var/www/yourdomain.com/user/config.php
</span></span><span style=display:flex><span>sudo sed -i <span style=color:#e6db74>&#34;s|YOUR_ADMIN_PASSWORD_HERE|</span>$ADMIN_PASS<span style=color:#e6db74>|&#34;</span> /var/www/yourdomain.com/user/config.php
</span></span><span style=display:flex><span>sudo sed -i <span style=color:#e6db74>&#34;s|https://yourdomain.com|https://yourdomain.com|&#34;</span> /var/www/yourdomain.com/user/config.php
</span></span></code></pre></div><p><strong>Note</strong>: Replace <code>yourdomain.com</code> with your actual domain name in the last command and in the config file.</p><h2 id=step-9-set-file-permissions>Step 9: Set File Permissions</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Set ownership to web server user</span>
</span></span><span style=display:flex><span>sudo chown -R www-data:www-data /var/www/yourdomain.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Set directory permissions</span>
</span></span><span style=display:flex><span>sudo chmod -R <span style=color:#ae81ff>755</span> /var/www/yourdomain.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Set config file permissions (readable but secure)</span>
</span></span><span style=display:flex><span>sudo chmod <span style=color:#ae81ff>644</span> /var/www/yourdomain.com/user/config.php
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Make plugins directory writable for future plugin installations</span>
</span></span><span style=display:flex><span>sudo chmod -R <span style=color:#ae81ff>775</span> /var/www/yourdomain.com/user/plugins
</span></span></code></pre></div><h2 id=step-10-create-htaccess-file>Step 10: Create .htaccess File</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo tee /var/www/yourdomain.com/.htaccess &gt; /dev/null <span style=color:#e6db74>&lt;&lt; &#39;EOFHTACCESS&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74># BEGIN YOURLS
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;IfModule mod_rewrite.c&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>RewriteEngine On
</span></span></span><span style=display:flex><span><span style=color:#e6db74>RewriteBase /
</span></span></span><span style=display:flex><span><span style=color:#e6db74>RewriteCond %{REQUEST_FILENAME} !-f
</span></span></span><span style=display:flex><span><span style=color:#e6db74>RewriteCond %{REQUEST_FILENAME} !-d
</span></span></span><span style=display:flex><span><span style=color:#e6db74>RewriteRule ^.*$ /yourls-loader.php [L]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&lt;/IfModule&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74># END YOURLS
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOFHTACCESS</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo chown www-data:www-data /var/www/yourdomain.com/.htaccess
</span></span><span style=display:flex><span>sudo chmod <span style=color:#ae81ff>644</span> /var/www/yourdomain.com/.htaccess
</span></span></code></pre></div><p>Next up, we need to configure Apache to serve your domain. This involves setting up virtual hosts for both HTTP and HTTPS.</p><h2 id=step-11-configure-apache-virtual-host>Step 11: Configure Apache Virtual Host</h2><h3 id=create-http-virtual-host-port-80>Create HTTP Virtual Host (Port 80)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo nano /etc/apache2/sites-available/yourdomain.com.conf
</span></span></code></pre></div><p>Add the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-apache data-lang=apache><span style=display:flex><span><span style=color:#f92672>&lt;VirtualHost</span> <span style=color:#e6db74>*:80</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    ServerAdmin webmaster@yourdomain.com
</span></span><span style=display:flex><span>    ServerName yourdomain.com
</span></span><span style=display:flex><span>    DocumentRoot <span style=color:#e6db74>/var/www/html</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Redirect HTTP to HTTPS</span>
</span></span><span style=display:flex><span>    Redirect permanent / https://yourdomain.com/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ErrorLog ${APACHE_LOG_DIR}/error.log
</span></span><span style=display:flex><span>    CustomLog ${APACHE_LOG_DIR}/access.log combined
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/VirtualHost&gt;</span>
</span></span></code></pre></div><h3 id=create-https-virtual-host-port-443>Create HTTPS Virtual Host (Port 443)</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo nano /etc/apache2/sites-available/yourdomain.com-ssl.conf
</span></span></code></pre></div><p>Add the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-apache data-lang=apache><span style=display:flex><span><span style=color:#f92672>&lt;VirtualHost</span> <span style=color:#e6db74>*:443</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    ServerAdmin webmaster@yourdomain.com
</span></span><span style=display:flex><span>    ServerName yourdomain.com
</span></span><span style=display:flex><span>    ServerAlias www.yourdomain.com
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># SSL Configuration</span>
</span></span><span style=display:flex><span>    SSLEngine <span style=color:#66d9ef>on</span>
</span></span><span style=display:flex><span>    SSLCertificateFile <span style=color:#e6db74>/path/to/your/certificate.crt</span>
</span></span><span style=display:flex><span>    SSLCertificateKeyFile <span style=color:#e6db74>/path/to/your/private.key</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># SSLCertificateChainFile /path/to/chain.pem  # If applicable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    DocumentRoot <span style=color:#e6db74>/var/www/yourdomain.com</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;Directory</span> <span style=color:#e6db74>/var/www/yourdomain.com</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        Options -Indexes +FollowSymLinks
</span></span><span style=display:flex><span>        AllowOverride <span style=color:#66d9ef>All</span>
</span></span><span style=display:flex><span>        Require <span style=color:#66d9ef>all</span> granted
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/Directory&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ErrorLog ${APACHE_LOG_DIR}/yourdomain.com-error.log
</span></span><span style=display:flex><span>    CustomLog ${APACHE_LOG_DIR}/yourdomain.com-access.log combined
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/VirtualHost&gt;</span>
</span></span></code></pre></div><h3 id=enable-sites>Enable Sites</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo a2ensite yourdomain.com.conf
</span></span><span style=display:flex><span>sudo a2ensite yourdomain.com-ssl.conf
</span></span></code></pre></div><h2 id=step-12-ssl-certificate-setup>Step 12: SSL Certificate Setup</h2><p>You have two main options for SSL certificates:</p><h3 id=option-a-using-lets-encrypt-recommended---free>Option A: Using Let&rsquo;s Encrypt (Recommended - Free)</h3><p>Let&rsquo;s Encrypt provides free SSL certificates with auto-renewal:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install certbot python3-certbot-apache -y
</span></span><span style=display:flex><span>sudo certbot --apache -d yourdomain.com -d www.yourdomain.com
</span></span></code></pre></div><p>Certbot will automatically configure Apache with SSL and set up auto-renewal.</p><h3 id=option-b-using-a-commercial-ssl-certificate>Option B: Using a Commercial SSL Certificate</h3><p>If using a commercial SSL certificate from your domain registrar:</p><ol><li>Upload your certificate files to the server</li><li>Update the SSL paths in <code>/etc/apache2/sites-available/yourdomain.com-ssl.conf</code>:<ul><li><code>SSLCertificateFile</code>: Path to your certificate file</li><li><code>SSLCertificateKeyFile</code>: Path to your private key file</li><li><code>SSLCertificateChainFile</code>: Path to your chain file (if provided)</li></ul></li></ol><p>Once SSL is configured, test Apache before pointing DNS to the server.</p><h2 id=step-13-test-and-start-apache>Step 13: Test and Start Apache</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Test Apache configuration</span>
</span></span><span style=display:flex><span>sudo apache2ctl configtest
</span></span></code></pre></div><p>If the test passes:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Restart Apache</span>
</span></span><span style=display:flex><span>sudo systemctl restart apache2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable Apache to start on boot</span>
</span></span><span style=display:flex><span>sudo systemctl enable apache2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check status</span>
</span></span><span style=display:flex><span>sudo systemctl status apache2
</span></span></code></pre></div><p>Apache is configured and running. Point your domain to this server to access YOURLS.</p><h2 id=step-14-configure-dns>Step 14: Configure DNS</h2><ol><li><p>Log into your domain registrar&rsquo;s DNS management panel</p></li><li><p>Create an A record pointing your domain to your Azure VM&rsquo;s public IP address:</p><ul><li><strong>Type</strong>: A</li><li><strong>Name</strong>: @ (or yourdomain.com)</li><li><strong>Value</strong>: YOUR_VM_PUBLIC_IP</li><li><strong>TTL</strong>: 3600 (or default)</li></ul></li><li><p>Optionally, create a CNAME record for www:</p><ul><li><strong>Type</strong>: CNAME</li><li><strong>Name</strong>: www</li><li><strong>Value</strong>: yourdomain.com</li><li><strong>TTL</strong>: 3600</li></ul></li></ol><p>DNS propagation can take anywhere from a few minutes to 48 hours, though it&rsquo;s usually much faster.</p><h2 id=step-15-verify-installation>Step 15: Verify Installation</h2><p>Once DNS has propagated:</p><h3 id=test-database-connection>Test Database Connection</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>DB_PASS<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>cat /tmp/yourls_db_pass.txt | cut -d<span style=color:#f92672>=</span> -f2<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>mysql -u yourls_user -p<span style=color:#e6db74>&#34;</span>$DB_PASS<span style=color:#e6db74>&#34;</span> -h localhost yourls_db -e <span style=color:#e6db74>&#34;SELECT 1;&#34;</span>
</span></span></code></pre></div><p>If this runs without errors, your database connection is working.</p><h3 id=access-admin-panel>Access Admin Panel</h3><ol><li>Open your browser and navigate to: <code>https://yourdomain.com/admin/</code></li><li>You should see the YOURLS setup page</li></ol><a href=#lightbox-azure-tutorial-screen4-jpg-3 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/azure-tutorial-screen4.jpg 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/azure-tutorial-screen4.jpg 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/azure-tutorial-screen4.jpg 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/azure-tutorial-screen4.jpg 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/azure-tutorial-screen4.jpg 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/azure-tutorial-screen4.jpg 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/azure-tutorial-screen4.jpg 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/azure-tutorial-screen4.jpg 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/azure-tutorial-screen4.jpg" alt=alt loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-azure-tutorial-screen4-jpg-3 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/azure-tutorial-screen4.jpg" alt=alt></a><ol start=3><li>Run the automatic installation</li></ol><a href=#lightbox-azure-tutorial-screen5-jpg-4 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/azure-tutorial-screen5.jpg 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/azure-tutorial-screen5.jpg 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/azure-tutorial-screen5.jpg 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/azure-tutorial-screen5.jpg 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/azure-tutorial-screen5.jpg 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/azure-tutorial-screen5.jpg 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/azure-tutorial-screen5.jpg 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/azure-tutorial-screen5.jpg 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/azure-tutorial-screen5.jpg" alt=alt loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-azure-tutorial-screen5-jpg-4 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/azure-tutorial-screen5.jpg" alt=alt></a><ol start=4><li><p>Reload the page</p></li><li><p>Login with:</p><ul><li><strong>Username</strong>: <code>admin</code> (or whatever you set in config.php)</li><li><strong>Password</strong>: The admin password you generated in Step 7</li></ul></li></ol><a href=#lightbox-azure-tutorial-screen6-jpg-5 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/azure-tutorial-screen6.jpg 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/azure-tutorial-screen6.jpg 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/azure-tutorial-screen6.jpg 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/azure-tutorial-screen6.jpg 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/azure-tutorial-screen6.jpg 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/azure-tutorial-screen6.jpg 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/azure-tutorial-screen6.jpg 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/azure-tutorial-screen6.jpg 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/azure-tutorial-screen6.jpg" alt=alt loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-azure-tutorial-screen6-jpg-5 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/azure-tutorial-screen6.jpg" alt=alt></a><h3 id=test-creating-a-short-url>Test Creating a Short URL</h3><p>Once logged in, create a short URL to verify everything works:</p><ol><li>Enter a long URL in the &ldquo;Enter a URL&rdquo; field</li><li>Optionally, specify a custom keyword</li><li>Click &ldquo;Shorten The URL&rdquo;</li></ol><a href=#lightbox-azure-tutorial-screen7-jpg-6 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/azure-tutorial-screen7.jpg 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/azure-tutorial-screen7.jpg 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/azure-tutorial-screen7.jpg 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/azure-tutorial-screen7.jpg 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/azure-tutorial-screen7.jpg 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/azure-tutorial-screen7.jpg 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/azure-tutorial-screen7.jpg 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/azure-tutorial-screen7.jpg 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/azure-tutorial-screen7.jpg" alt=alt loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-azure-tutorial-screen7-jpg-6 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/azure-tutorial-screen7.jpg" alt=alt></a><h2 id=troubleshooting>Troubleshooting</h2><h3 id=apache-returns-403-forbidden>Apache Returns 403 Forbidden</h3><ul><li>Check file permissions: <code>sudo chown -R www-data:www-data /var/www/yourdomain.com</code></li><li>Verify <code>AllowOverride All</code> is set in Apache config</li><li>Check Apache error logs: <code>sudo tail -f /var/log/apache2/error.log</code></li></ul><h3 id=database-connection-errors>Database Connection Errors</h3><ul><li>Verify database exists: <code>sudo mysql -e "SHOW DATABASES;"</code></li><li>Check user permissions: <code>sudo mysql -e "SHOW GRANTS FOR 'yourls_user'@'localhost';"</code></li><li>Verify password in config.php matches the database user password</li></ul><h3 id=ssl-certificate-issues>SSL Certificate Issues</h3><ul><li>Ensure mod_ssl is enabled: <code>sudo a2enmod ssl</code></li><li>Check certificate paths are correct</li><li>Verify certificate files are readable: <code>sudo ls -la /path/to/certificate</code></li><li>For Let&rsquo;s Encrypt, check renewal: <code>sudo certbot renew --dry-run</code></li></ul><h3 id=short-urls-not-working>Short URLs Not Working</h3><ul><li>Verify mod_rewrite is enabled: <code>sudo a2enmod rewrite</code></li><li>Check .htaccess file exists and has correct permissions</li><li>Ensure <code>AllowOverride All</code> is set in Apache Directory directive</li><li>Check Apache error logs for specific rewrite errors</li></ul><h3 id=cant-access-site-after-dns-change>Can&rsquo;t Access Site After DNS Change</h3><ul><li>Verify DNS propagation: <code>dig yourdomain.com</code> or use online DNS checkers</li><li>Check that your firewall allows HTTP (80) and HTTPS (443) traffic</li><li>Verify Apache is running: <code>sudo systemctl status apache2</code></li><li>Check that your virtual hosts are enabled: <code>sudo apache2ctl -S</code></li></ul><h2 id=security-best-practices>Security Best Practices</h2><ol><li><strong>Keep credentials secure</strong>: Store database passwords and admin credentials in a password manager</li><li><strong>Regular updates</strong>: Keep YOURLS, PHP, Apache, and MySQL updated:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update <span style=color:#f92672>&amp;&amp;</span> sudo apt upgrade -y
</span></span></code></pre></div></li><li><strong>Backup regularly</strong>: Set up automated backups for your database and config files</li><li><strong>File permissions</strong>: Never make config.php world-writable (644 is sufficient)</li><li><strong>Firewall</strong>: Configure Azure Network Security Groups to only allow necessary ports</li><li><strong>SSH security</strong>: Consider disabling password authentication and using SSH keys only</li></ol><h2 id=file-locations-summary>File Locations Summary</h2><ul><li><strong>YOURLS Installation</strong>: <code>/var/www/yourdomain.com/</code></li><li><strong>Configuration File</strong>: <code>/var/www/yourdomain.com/user/config.php</code></li><li><strong>Apache Config (HTTP)</strong>: <code>/etc/apache2/sites-available/yourdomain.com.conf</code></li><li><strong>Apache Config (HTTPS)</strong>: <code>/etc/apache2/sites-available/yourdomain.com-ssl.conf</code></li><li><strong>.htaccess</strong>: <code>/var/www/yourdomain.com/.htaccess</code></li><li><strong>Database</strong>: <code>yourls_db</code> (MySQL)</li><li><strong>Database User</strong>: <code>yourls_user@localhost</code></li></ul><h2 id=next-steps>Next Steps</h2><p>Now that everything is working, here&rsquo;s what you can do next:</p><ol><li>Log into the admin panel at <code>https://yourdomain.com/admin/</code></li><li>Test creating a short URL</li><li>Customize your YOURLS installation with plugins from the <a href=https://yourls.org/pluginlist>YOURLS plugin directory</a></li><li>Set up regular backups (consider automating with cron jobs)</li><li>Monitor your installation for security updates</li><li>Configure analytics if desired</li><li>Set up email notifications for new short URLs (if using plugins)</li></ol><h2 id=conclusion>Conclusion</h2><p>That&rsquo;s it. You&rsquo;ve got your own URL shortener running. YOURLS is flexible once you start digging into plugins and customization. Since we&rsquo;re using free tier VMs, this setup costs nothing to run, perfect for personal projects or small teams.</p><p>Keep everything updated and set up backups. The last thing you want is losing all your links because you forgot to back up the database.</p><h2 id=references>References</h2><ul><li><a href=https://yourls.org/>YOURLS Official Website</a></li><li><a href=https://yourls.org/docs>YOURLS Documentation</a></li><li><a href=https://github.com/YOURLS/YOURLS>YOURLS GitHub Repository</a></li><li><a href=https://azure.microsoft.com/free/>Azure Free Tier Documentation</a></li><li><a href=https://letsencrypt.org/docs/>Let&rsquo;s Encrypt Documentation</a></li></ul></div></article><footer class=feedback-footer><p>Have feedback, comments, or ideas? <a href=mailto:info@philippdubach.com>I'd love to hear from you</a>.</p><p class=latest-post>Latest: <a href=/2025/12/12/how-ai-is-shaping-my-investment-portfolio-for-2026/>How AI is Shaping My Investment Portfolio for 2026</a></p><p class=most-read id=top-post-week style=min-height:1.5em></p></footer><script src=/js/goatcounter-top.js></script><script>(function(){var t=document.getElementById("share-link"),e=document.getElementById("share-status");if(!t)return;t.addEventListener("click",function(t){t.preventDefault(),e.textContent="...";var s,n=window.location.href;navigator.clipboard&&navigator.clipboard.write&&typeof ClipboardItem!="undefined"?(s=new ClipboardItem({"text/plain":fetch("https://pdub.click/yourls-api.php?signature=4807288869&action=shorturl&format=json&url="+encodeURIComponent(n)).then(function(e){return e.json()}).then(function(e){var t=e.shorturl||"";return new Blob([t],{type:"text/plain"})}).catch(function(){return new Blob([""],{type:"text/plain"})})}),navigator.clipboard.write([s]).then(function(){e.textContent="url copied",setTimeout(function(){e.textContent=""},2e3)}).catch(function(){e.textContent="error",setTimeout(function(){e.textContent=""},2e3)})):fetch("https://pdub.click/yourls-api.php?signature=4807288869&action=shorturl&format=json&url="+encodeURIComponent(n)).then(function(e){return e.json()}).then(function(t){var n=t.shorturl;n&&navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(n).then(function(){e.textContent="url copied",setTimeout(function(){e.textContent=""},2e3)}).catch(function(){e.textContent=n,setTimeout(function(){e.textContent=""},4e3)}):n?(e.textContent=n,setTimeout(function(){e.textContent=""},4e3)):(e.textContent="error",setTimeout(function(){e.textContent=""},2e3))}).catch(function(){e.textContent="error",setTimeout(function(){e.textContent=""},2e3)})})})()</script></main></div></body></html>