<!doctype html><html lang=en-us><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=.5"><title>The Tech behind this Site - philippdubach</title><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.147.8"><title>The Tech behind this Site - philippdubach</title><meta name=description content="Personal Projects, Curated Articles and Papers on Economics, Finance and Technology"><meta name=keywords content="Finance,Economics,Technology,Data,Machine Learning"><meta property="og:url" content="http://localhost:1313/2024/01/15/the-tech-behind-this-site/"><meta property="og:site_name" content="philippdubach"><meta property="og:title" content="The Tech behind this Site"><meta property="og:description" content="Similar to how Simon Willison describes his difficulties managing images for his approach to running a link blog I found it hard to remain true to pure markdown syntax but have images embedded in a responsive way on this site.
My current pipeline is as follows: I host my all my images in a R2 bucket and serve them from static.philippdubach.com. I use Cloudflares’s image resizing CDN do I never have to worry about serving images in appropriate size or format. I basically just upload them with the highes possible quality and Cloudflare takes care of the rest."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-15T00:00:00+00:00"><meta property="article:modified_time" content="2024-01-15T00:00:00+00:00"><meta property="article:tag" content="Project"><meta name=twitter:card content="summary"><meta name=twitter:title content="The Tech behind this Site"><meta name=twitter:description content="Similar to how Simon Willison describes his difficulties managing images for his approach to running a link blog I found it hard to remain true to pure markdown syntax but have images embedded in a responsive way on this site.
My current pipeline is as follows: I host my all my images in a R2 bucket and serve them from static.philippdubach.com. I use Cloudflares’s image resizing CDN do I never have to worry about serving images in appropriate size or format. I basically just upload them with the highes possible quality and Cloudflare takes care of the rest."><link rel=canonical href=http://localhost:1313/2024/01/15/the-tech-behind-this-site/><link rel=stylesheet href=/css/custom.css><link rel=icon type=image/png href=/static/icons/favicon-96x96.png sizes=96x96><link rel=icon type=image/svg+xml href=/static/icons/favicon.svg><link rel="shortcut icon" href=/static/icons/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/static/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-title content="philippdubach.com"><link rel=manifest href=/static/icons/site.webmanifest><meta name=theme-color content="#434648"></head></head><body class=linkblog><div class=container><aside class=sidebar><div class=sidebar-content><div class=site-header><h1 class=site-title><a href=http://localhost:1313/>philippdubach</a></h1><p class=site-description>Personal Projects, Curated Articles and Papers on Economics, Finance and Technology</p></div><nav class=navigation><ul><li><a href=/>Home</a></li><li><a href=/projects/>Projects</a></li><li><a href=/about/>About</a></li><li><a href=/posts/>Archive</a></li><li><a href=/index.xml>RSS</a></li></ul></nav><div class=social-links><a href=https://github.com/philippdubach target=_blank rel=noopener>GitHub</a>
<a href=mailto:info@philippdubach.com>Email</a></div></div></aside><main class=content><article class="post single"><header class=post-header><h1 class=post-title>The Tech behind this Site</h1><div class=post-meta><time datetime=2024-01-15T00>January 15, 2024</time></div></header><div class=post-content><p>Similar to how Simon Willison describes his difficulties managing images for his <a href=https://simonwillison.net/2024/Dec/22/link-blog/>approach to running a link blog</a> I found it hard to remain true to pure markdown syntax but have images embedded in a responsive way on this site.</p><p>My current pipeline is as follows: I host my all my images in a R2 bucket and serve them from <code>static.philippdubach.com</code>. I use Cloudflares&rsquo;s image resizing CDN do I never have to worry about serving images in appropriate size or format. I basically just upload them with the highes possible quality and Cloudflare takes care of the rest.</p><p>Since the site runs on Hugo, I needed a solution that would work within this static site generation workflow. Pure markdown syntax like <code>![alt](url)</code> is clean and portable, but it doesn&rsquo;t give me the responsive image capabilities I was looking for.</p><p>The solution I settled on was creating a <a href=https://gist.github.com/philippdubach/167189c7090c6813c5110c467cb5ebe9>Hugo shortcode</a> that leverages Cloudflare&rsquo;s image transformations while maintaining a simple, markdown-like syntax.
The shortcode generates a <code>&lt;picture></code> element with multiple <code>&lt;source></code> tags, each targeting different screen sizes and serving WebP format. Here&rsquo;s how it works: instead of writing standard markdown image syntax, I use <code>{{ img src="image.jpg" alt="Description" }}</code> in my posts. Behind the scenes, the shortcode constructs URLs for different breakpoints. This means I upload one high-quality image, but users receive perfectly sized versions - a 320px wide WebP for mobile users, a 1600px version for desktop, and everything in between. The shortcode defaults to displaying images at 80% width and centered, but I can override this with a width parameter when needed. It&rsquo;s a nice compromise between the simplicity of markdown and the power of modern responsive image techniques. The syntax remains clean and the performance benefits are substantial - especially important since images are often the heaviest assets on any webpage.</p></div></article></main></div></body></html>