<!doctype html><html lang=en-us><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>The Tech behind this Site - philippdubach.com</title><meta name=description content="Describing the technical solution for implementing responsive images in Hugo static sites using Cloudflare's image CDN and custom shortcodes, maintaining clean markdown-like syntax while delivering optimized WebP images across different screen sizes."><meta name=keywords content="Hugo static site,responsive images,Cloudflare image CDN,Hugo shortcode,WebP optimization,image resizing,R2 bucket,static site generation,markdown syntax,picture element,image transformations,mobile optimization,web performance"><meta name=author content="Philipp Dubach"><meta name=generator content="Hugo 0.147.8"><link rel=canonical href=http://localhost:1313/2024/01/15/the-tech-behind-this-site/><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:helvetica neue,Helvetica,Arial,segoe ui,sans-serif;padding-top:90px;line-height:1.6;color:#333;background-color:#f8f9fa}blockquote{margin:1em 0;padding-left:1em;border-left:2px solid #ccc;color:#666}blockquote p{margin:.5em 0}.container{display:flex;max-width:1200px;margin:0 auto;min-height:100vh}.sidebar{width:200px;background-color:#f8f9fa;padding:1.5rem;border-right:0 solid #e9ecef;position:sticky;top:0;height:100vh;overflow-y:auto}.site-title a{text-decoration:none;color:#333;font-size:1.5rem;font-weight:700}.site-description{color:#666;margin:.5rem 0 2rem;font-size:.9rem}.navigation ul{list-style:none;margin-bottom:2rem}.navigation li{margin-bottom:.5rem}.navigation a{text-decoration:none;color:#007acc;font-weight:500}.navigation a:hover{text-decoration:underline}.social-links a{display:inline-block;margin-right:1rem;color:#666;text-decoration:none;font-size:.9rem}.social-links a:hover{color:#007acc}.content{flex:1;padding:2rem;max-width:800px}.posts{max-width:90%}.post{margin-bottom:1rem;padding-bottom:1rem}.post:last-child{border-bottom:none}.post-title{margin-bottom:.5rem}.post-title a{text-decoration:none;color:#333;font-size:1.25rem;font-weight:600}.post-title a:hover{color:#007acc}.external-link{color:#007acc;font-weight:400;margin-left:.25rem}.post-meta{font-size:.85rem;color:#666;margin-bottom:0}.permalink{text-decoration:none;color:#999;font-weight:400}.permalink:hover{color:#007acc}.post-content{line-height:1.7}.post-content p{margin-bottom:1rem}.post-content a{color:#007acc;text-decoration:none}.post-content a:hover{text-decoration:underline}.project-tag{background-color:#e9ecef;color:#495057;padding:2px 6px;border-radius:3px;font-size:9px;font-weight:500;text-transform:uppercase;letter-spacing:.3px;margin-left:6px;display:inline-block;vertical-align:middle;border:1px solid #dee2e6}.archive{max-width:90%}.year h2{margin:2rem 0 1rem;color:#333;font-size:1.5rem}.archive-item{display:flex;margin-bottom:.75rem;align-items:baseline}.archive-meta{width:60px;flex-shrink:0;font-size:.85rem;color:#666}.archive-title{flex:1}.archive-title a{text-decoration:none;color:#333}.archive-title a:hover{color:#007acc}.archive-title .permalink{margin-left:.5rem}.single .post-title{font-size:1.75rem;margin-bottom:1rem}.pagination{margin-top:3rem;text-align:center;padding-top:2rem;border-top:1px solid #e9ecef}.pagination a{display:inline-block;padding:.5rem 1rem;margin:0 .5rem;background-color:#f8f9fa;color:#007acc;text-decoration:none;border-radius:4px;border:1px solid #e9ecef}.pagination a:hover{background-color:#007acc;color:#fff}@media(prefers-color-scheme:dark){.pagination{border-top-color:#404040}.pagination a{background-color:#2a2a2a;color:#4da6ff;border-color:#404040}.pagination a:hover{background-color:#4da6ff;color:#1a1a1a}}@media(prefers-color-scheme:dark){.project-tag{background-color:#404040;color:#b0b0b0;border-color:#555}}@media screen and (max-width:768px){html{font-size:8px !important}body{font-size:1rem !important}.sidebar{width:100px !important;padding:.75rem !important}.container{max-width:600px !important;margin:0 20px !important}.content{max-width:400px !important;padding:1rem !important}.project-tag{padding:1px 3px !important;border-radius:1.5px !important;font-size:4.5px !important;letter-spacing:.15px !important;margin-left:3px !important}.archive-meta{width:30px !important}}@media(prefers-color-scheme:dark){body{background-color:#2a2a2a;color:#e0e0e0}.sidebar{background-color:#2a2a2a;border-right-color:#404040}.site-title a{color:#e0e0e0}.post-title a{color:#e0e0e0}.archive-title a{color:#e0e0e0}.post-title a:hover,.navigation a:hover,.social-links a:hover,.archive-title a:hover{color:#4da6ff}.post{border-bottom-color:#404040}.footer{border-top-color:#404040}}</style><link rel=icon type=image/png href=/icons/favicon-96x96.png sizes=96x96><link rel=icon type=image/svg+xml href=/icons/favicon.svg><link rel="shortcut icon" href=/icons/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-title content="philippdubach.com"><link rel=manifest href=/icons/site.webmanifest><meta name=theme-color content="#2c3e50"><meta name=msapplication-TileColor content="#2c3e50"><meta property="og:title" content="The Tech behind this Site"><meta property="og:description" content="Describing the technical solution for implementing responsive images in Hugo static sites using Cloudflare's image CDN and custom shortcodes, maintaining clean markdown-like syntax while delivering optimized WebP images across different screen sizes."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/2024/01/15/the-tech-behind-this-site/"><meta property="og:site_name" content="philippdubach.com"><meta property="og:locale" content="en_US"><meta property="og:logo" content="http://localhost:1313/icons/favicon.ico"><meta property="og:image" content="https://static.philippdubach.com/ograph/ograph-projects.jpg"><meta property="article:published_time" content="2024-01-15T00:00:00Z"><meta property="article:modified_time" content="2024-01-15T00:00:00Z"><meta property="article:section" content="posts"><meta property="article:tag" content="Project"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="The Tech behind this Site"><meta name=twitter:description content="Describing the technical solution for implementing responsive images in Hugo static sites using Cloudflare's image CDN and custom shortcodes, maintaining clean markdown-like syntax while delivering optimized WebP images across different screen sizes."><meta name=twitter:image content="https://static.philippdubach.com/ograph/ograph-projects.jpg"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"http:\/\/localhost:1313\/"},{"@type":"ListItem","position":2,"name":"Posts","item":"http:\/\/localhost:1313\/posts/"},{"@type":"ListItem","position":3,"name":"The Tech behind this Site","item":"http:\/\/localhost:1313\/2024\/01\/15\/the-tech-behind-this-site\/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"The Tech behind this Site","name":"The Tech behind this Site","description":"Describing the technical solution for implementing responsive images in Hugo static sites using Cloudflare\u0027s image CDN and custom shortcodes, maintaining clean markdown-like syntax while delivering optimized WebP images across different screen sizes.","keywords":["Hugo static site","responsive images","Cloudflare image CDN","Hugo shortcode","WebP optimization","image resizing","R2 bucket","static site generation","markdown syntax","picture element","image transformations","mobile optimization","web performance"],"articleBody":"\"Similar to how Simon Willison describes his difficulties managing images for his approach to running a link blog I found it hard to remain true to pure markdown syntax but have images embedded in a responsive way on this site.\\nMy current pipeline is as follows: I host my all my images in a R2 bucket and serve them from static.philippdubach.com. I use Cloudflares\\u0026rsquo;s image resizing CDN do I never have to worry about serving images in appropriate size or format. I basically just upload them with the highes possible quality and Cloudflare takes care of the rest.\\nSince the site runs on Hugo, I needed a solution that would work within this static site generation workflow. Pure markdown syntax like ![alt](url) is clean and portable, but it doesn\\u0026rsquo;t give me the responsive image capabilities I was looking for.\\nThe solution I settled on was creating a Hugo shortcode that leverages Cloudflare\\u0026rsquo;s image transformations while maintaining a simple, markdown-like syntax. The shortcode generates a \\u0026lt;picture\\u0026gt; element with multiple \\u0026lt;source\\u0026gt; tags, each targeting different screen sizes and serving WebP format. Here\\u0026rsquo;s how it works: instead of writing standard markdown image syntax, I use {{ img src=\\u0026quot;image.jpg\\u0026quot; alt=\\u0026quot;Description\\u0026quot; }} in my posts. Behind the scenes, the shortcode constructs URLs for different breakpoints. This means I upload one high-quality image, but users receive perfectly sized versions - a 320px wide WebP for mobile users, a 1600px version for desktop, and everything in between. The shortcode defaults to displaying images at 80% width and centered, but I can override this with a width parameter when needed. It\\u0026rsquo;s a nice compromise between the simplicity of markdown and the power of modern responsive image techniques. The syntax remains clean and the performance benefits are substantial - especially important since images are often the heaviest assets on any webpage.\\n\"","wordCount":302,"inLanguage":"en","image":"https:\/\/static.philippdubach.com\/ograph\/ograph-projects.jpg","datePublished":"2024-01-15T00:00:00Z","dateModified":"2024-01-15T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/localhost:1313\/2024\/01\/15\/the-tech-behind-this-site\/"},"publisher":{"@type":"Organization","name":"philippdubach","logo":{"@type":"ImageObject","url":"http:\/\/localhost:1313\/icons/favicon.ico"}},"author":{"@type":"Person","name":"Philipp Dubach"}}</script></head><body class=linkblog><div class=container><aside class=sidebar><div class=sidebar-content><div class=site-header><h1 class=site-title><a href=http://localhost:1313/>philippdubach</a></h1><p class=site-description>Personal Projects, Curated Articles and Papers on Economics, Finance and Technology</p></div><nav class=navigation><ul><li><a href=/>Home</a></li><li><a href=/projects/>Projects</a></li><li><a href=/about/>About</a></li><li><a href=/posts/>Archive</a></li><li><a href=/index.xml>RSS</a></li></ul></nav><div class=social-links><a href=https://github.com/philippdubach target=_blank rel=noopener>GitHub</a>
<a href=mailto:info@philippdubach.com>Email</a></div></div></aside><main class=content><article class="post single"><header class=post-header><h1 class=post-title>The Tech behind this Site</h1><div class=post-meta><time datetime=2024-01-15T00>January 15, 2024</time></div></header><div class=post-content><p>Similar to how Simon Willison describes his difficulties managing images for his <a href=https://simonwillison.net/2024/Dec/22/link-blog/>approach to running a link blog</a> I found it hard to remain true to pure markdown syntax but have images embedded in a responsive way on this site.</p><p>My current pipeline is as follows: I host my all my images in a R2 bucket and serve them from <code>static.philippdubach.com</code>. I use Cloudflares&rsquo;s image resizing CDN do I never have to worry about serving images in appropriate size or format. I basically just upload them with the highes possible quality and Cloudflare takes care of the rest.</p><p>Since the site runs on Hugo, I needed a solution that would work within this static site generation workflow. Pure markdown syntax like <code>![alt](url)</code> is clean and portable, but it doesn&rsquo;t give me the responsive image capabilities I was looking for.</p><p>The solution I settled on was creating a <a href=https://gist.github.com/philippdubach/167189c7090c6813c5110c467cb5ebe9>Hugo shortcode</a> that leverages Cloudflare&rsquo;s image transformations while maintaining a simple, markdown-like syntax.
The shortcode generates a <code>&lt;picture></code> element with multiple <code>&lt;source></code> tags, each targeting different screen sizes and serving WebP format. Here&rsquo;s how it works: instead of writing standard markdown image syntax, I use <code>{{ img src="image.jpg" alt="Description" }}</code> in my posts. Behind the scenes, the shortcode constructs URLs for different breakpoints. This means I upload one high-quality image, but users receive perfectly sized versions - a 320px wide WebP for mobile users, a 1600px version for desktop, and everything in between. The shortcode defaults to displaying images at 80% width and centered, but I can override this with a width parameter when needed. It&rsquo;s a nice compromise between the simplicity of markdown and the power of modern responsive image techniques. The syntax remains clean and the performance benefits are substantial - especially important since images are often the heaviest assets on any webpage.</p></div></article></main></div></body></html>