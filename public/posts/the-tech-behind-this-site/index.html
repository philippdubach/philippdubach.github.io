<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=Content-Security-Policy content="default-src 'self'; script-src 'self' 'unsafe-inline' https://gc.zgo.at https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://philippdubach.goatcounter.com https://weekly-top-goatcounter-api.philippd.workers.dev https://newsletter-api.philippd.workers.dev https://gc.zgo.at https://pdub.click; frame-ancestors 'self'; base-uri 'self';"><link rel=preconnect href=https://gc.zgo.at crossorigin><link rel=preconnect href=https://static.philippdubach.com crossorigin><link rel=preconnect href=https://pdub.click crossorigin><link rel=preconnect href=https://newsletter-api.philippd.workers.dev crossorigin><link rel=dns-prefetch href=https://gc.zgo.at><link rel=dns-prefetch href=https://static.philippdubach.com><link rel=dns-prefetch href=https://pdub.click><link rel=dns-prefetch href=https://newsletter-api.philippd.workers.dev><meta name=robots content="index, follow"><title>The Tech behind this Site - philippdubach.com</title><meta name=description content="Technical guide to implementing responsive images in Hugo using Cloudflare's CDN and custom shortcodes for optimized WebP delivery."><meta name=keywords content="Hugo static site,responsive images,Cloudflare image CDN,Hugo shortcode,WebP optimization,image resizing,R2 bucket,static site generation,markdown syntax,picture element,image transformations,mobile optimization,web performance"><meta name=author content="Philipp D. Dubach"><meta name=generator content="Hugo 0.149.0"><link rel=canonical href=https://philippdubach.com/posts/the-tech-behind-this-site/><style>*{margin:0;padding:0;box-sizing:border-box}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.skip-link{position:absolute;top:-100%;left:50%;transform:translateX(-50%);background:#333;color:#fff;padding:.75rem 1.5rem;text-decoration:none;font-weight:500;z-index:10000;border-radius:0 0 4px 4px;transition:top .2s ease-in-out}.skip-link:focus{top:0;outline:2px solid #007acc;outline-offset:2px}a:focus-visible,button:focus-visible,input:focus-visible,textarea:focus-visible,select:focus-visible{outline:2px solid #007acc;outline-offset:2px}.post-content a:focus-visible,.archive-title a:focus-visible,.navigation a:focus-visible{outline:2px solid #007acc;outline-offset:2px;background-color:#e6f3ff}body{font-family:helvetica neue,Helvetica,Arial,segoe ui,sans-serif;padding-top:90px;line-height:1.6;color:#333;background-color:#ffff}blockquote{margin:1em 0;padding-left:1em;border-left:2px solid #aaa;color:#595959}blockquote p{margin:.5em 0}.container{display:flex;max-width:1200px;margin:0 auto;min-height:100vh}.sidebar{width:200px;min-width:200px;flex-shrink:0;background-color:#ffff;padding:1.5rem;border-right:0 solid #e9ecef;position:sticky;top:0;height:100vh;overflow-y:auto}.site-title a{text-decoration:none;color:#333;font-size:1.5rem;font-weight:700}.site-description{color:#595959;margin:.5rem 0 2rem;font-size:.9rem}.navigation ul{list-style:none;margin-bottom:2rem}.navigation li{margin-bottom:.5rem}.navigation a{text-decoration:none;color:#007acc;font-weight:500}.navigation a:hover{text-decoration:underline}.social-links a{display:inline-block;margin-right:1rem;color:#595959;text-decoration:none;font-size:.9rem}.social-links a:hover{color:#007acc}.content{flex:1;padding:2rem;padding-bottom:3rem;max-width:800px}.posts{max-width:90%}.post{margin-bottom:1rem;padding-bottom:1rem}.post:last-child{border-bottom:none}.post-title{margin-bottom:.5rem;line-height:1.3}.post-title a{text-decoration:none;color:#333;font-size:1.25rem;font-weight:600;line-height:1.3}.post-title a:hover{color:#007acc}.post-meta{font-size:.85rem;color:#595959;margin-bottom:0}.post-meta a{color:#007acc;text-decoration:none}.post-meta a:hover{text-decoration:underline}.post-content{line-height:1.7}.post-content p{margin-bottom:1rem}.post-content p:last-child{margin-bottom:.5rem}.post-content a{color:#007acc;text-decoration:none}.post-content a:hover{text-decoration:underline}.project-tag{background-color:#e9ecef;color:#495057;padding:2px 6px;border-radius:3px;font-size:9px;font-weight:500;text-transform:uppercase;letter-spacing:.3px;margin-left:6px;display:inline-block;vertical-align:middle;border:1px solid #dee2e6}.archive{max-width:90%}.year h2{margin:2rem 0 1rem;color:#333;font-size:1.5rem}.archive-item{display:flex;margin-bottom:.75rem;align-items:baseline}.archive-meta{width:60px;flex-shrink:0;font-size:.85rem;color:#595959}.archive-title{flex:1}.archive-title a{text-decoration:none;color:#333}.archive-title a:hover{color:#007acc}@supports(text-wrap:balance){.archive-title{text-wrap:balance}}.single .post-title{font-size:1.5rem;margin-bottom:1rem;line-height:1.3}.pagination{margin-top:2rem;margin-bottom:1rem;text-align:center;padding-top:2rem;padding-bottom:1rem;border-top:1px solid #e9ecef}.pagination a{color:#007acc;text-decoration:none;font-weight:500}.pagination a:hover{text-decoration:underline}.img-lightbox{cursor:pointer;transition:opacity .2s}.img-lightbox:hover{opacity:.9}a.lightbox-overlay,a.lightbox-overlay:link,a.lightbox-overlay:visited,a.lightbox-overlay:hover,a.lightbox-overlay:active,a.lightbox-overlay:focus{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(255,255,255,.85) !important;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);z-index:9999;cursor:pointer;align-items:center;justify-content:center;padding:2rem;box-sizing:border-box;-webkit-tap-highlight-color:transparent;text-decoration:none !important;color:transparent !important;outline:none !important;border:none !important}.lightbox-overlay:target,a.lightbox-overlay:target{display:flex}.lightbox-overlay img{max-width:95%;max-height:95%;object-fit:contain;background:0 0;box-shadow:0 4px 20px rgba(0,0,0,.15);border-radius:4px}.feedback-footer{margin-top:.75rem;padding-top:.75rem;border-top:1px solid #e9ecef;text-align:center;color:#595959;font-size:.9rem;margin-bottom:2rem}.feedback-footer p{margin:0;line-height:1.6}.feedback-footer a{color:#007acc;text-decoration:none}.feedback-footer a:hover{text-decoration:underline}#newsletter-form-container{display:flex;flex-direction:column;align-items:center;margin:2rem 0}.newsletter-form{margin:0;display:flex;gap:.5rem;align-items:center;max-width:300px;width:100%}.form-group{flex:1;min-width:0}.newsletter-input{width:100%;padding:.5rem .75rem;font-size:.9rem;border:1px solid #e9ecef;border-radius:0;font-family:inherit;color:#333;background-color:#fff;transition:border-color .2s}.newsletter-input:focus{outline:none;border-color:#333}.newsletter-button{padding:.5rem 1rem;font-size:.9rem;background-color:transparent;color:#333;border:1px solid #333;border-radius:0;cursor:pointer;font-family:inherit;font-weight:400;white-space:nowrap;transition:background-color .2s,color .2s}.newsletter-button:hover:not(:disabled){background-color:#333;color:#fff}.newsletter-button:disabled{opacity:.5;cursor:not-allowed}.subscriber-count{margin:.75rem 0 0;font-size:.85rem;color:#595959;text-align:center}.newsletter-message{margin:1.5rem 0 0;padding:0;border-radius:0;line-height:1.6;text-align:center;max-width:300px;width:100%}.newsletter-message-success{background-color:transparent;color:#333;border:none}.newsletter-message-error{background-color:transparent;color:#595959;border:none}.newsletter-message a{color:#007acc;text-decoration:none}.newsletter-message a:hover{text-decoration:underline}.newsletter-archive{margin:2rem 0}.newsletter-list{list-style:none;padding:0}.newsletter-item{margin-bottom:1rem;padding-bottom:.75rem;border-bottom:1px solid #e9ecef}.newsletter-item:last-child{border-bottom:none}.newsletter-date{color:#595959;font-size:.9rem;margin-right:.5rem;min-width:120px;display:inline-block}.newsletter-item a{color:#333;text-decoration:none}.newsletter-item a:hover{color:#007acc;text-decoration:underline}@media screen and (max-width:768px){html{font-size:8px !important}body{font-size:1rem !important}.sidebar{width:90px !important;min-width:90px !important;padding:.75rem !important}.container{max-width:600px !important;margin:0 20px !important}.content{max-width:400px !important;padding:1rem !important;padding-bottom:.5rem !important;overflow-x:hidden !important;min-width:0 !important}.pagination{margin-bottom:1.5rem !important;padding-bottom:1.5rem !important}.project-tag{padding:1px 3px !important;border-radius:1.5px !important;font-size:4.5px !important;letter-spacing:.15px !important;margin-left:3px !important}.archive-meta{width:30px !important}.post-title,.post-title a,.single .post-title{line-height:1.2 !important}.post-content p:last-child{margin-bottom:.25rem !important}.feedback-footer{margin-top:.5rem !important;padding-top:.5rem !important;margin-bottom:1rem !important}#newsletter-form-container{margin:1rem 0 !important}.newsletter-form{max-width:200px !important}.newsletter-message{max-width:200px !important}.newsletter-date{display:block !important;margin-bottom:.25rem !important;min-width:auto !important}}code{font-family:sfmono-regular,Consolas,liberation mono,Menlo,Monaco,monospace;font-size:.875rem;line-height:1.5}p code,li code,td code,h1 code,h2 code,h3 code,h4 code,h5 code,h6 code{background-color:#f6f8fa;padding:.2em .4em;border-radius:4px;font-size:.875em;color:#24292f;word-break:break-word}pre{background-color:#f6f8fa;border-radius:6px;padding:0;margin:1rem 0;overflow:hidden}.highlight{margin:1rem 0;border-radius:6px;overflow:hidden;background-color:#f6f8fa;max-width:100%}.highlight pre{margin:0;background-color:transparent;border-radius:0;overflow-x:auto}.highlight table,.highlight .lntable{width:100%;border-collapse:collapse;border-spacing:0;padding:0;margin:0;border:0;display:table}.highlight table td,.highlight .lntd{padding:0;margin:0;border:0;vertical-align:top}.highlight .lntd:first-child{width:3.5rem;min-width:3.5rem;user-select:none;background-color:#ebedf0;border-right:1px solid #d0d7de}.highlight .lntd:first-child pre{padding:0;margin:0;overflow:hidden}.highlight .lntd:first-child pre code{display:block;padding:1rem 0}.highlight .lnt,.highlight .ln{display:block;padding:0 .75rem;color:#6e7781;text-align:right;font-size:inherit;line-height:inherit;white-space:pre;user-select:none}.highlight .lntd:last-child{overflow-x:auto}.highlight .lntd:last-child pre{padding:0;margin:0;overflow-x:auto}.highlight .lntd:last-child pre code{display:block;white-space:pre;word-wrap:normal;overflow-x:visible;padding:1rem}.chroma .line{display:block;padding:0;margin:0}.chroma .cl{display:block}.chroma .hl{background-color:#fff8c5}.bg{background-color:#f6f8fa}.chroma{background-color:#f6f8fa;color:#1f2328}.chroma .err{color:#cf222e;background-color:transparent}.chroma .k{color:#cf222e}.chroma .kc{color:#cf222e}.chroma .kd{color:#cf222e}.chroma .kn{color:#cf222e}.chroma .kp{color:#cf222e}.chroma .kr{color:#cf222e}.chroma .kt{color:#cf222e}.chroma .na{color:#1f2328}.chroma .nc{color:#1f2328}.chroma .no{color:#0550ae}.chroma .nd{color:#8250df}.chroma .ni{color:#6639ba}.chroma .nl{color:#0550ae;font-weight:700}.chroma .nn{color:#24292e}.chroma .nx{color:#1f2328}.chroma .nt{color:#116329}.chroma .nb{color:#6639ba}.chroma .bp{color:#6a737d}.chroma .nv{color:#953800}.chroma .vc{color:#953800}.chroma .vg{color:#953800}.chroma .vi{color:#953800}.chroma .vm{color:#953800}.chroma .nf{color:#8250df}.chroma .fm{color:#8250df}.chroma .s{color:#0a3069}.chroma .sa{color:#0a3069}.chroma .sb{color:#0a3069}.chroma .sc{color:#0a3069}.chroma .dl{color:#0a3069}.chroma .sd{color:#0a3069}.chroma .s2{color:#0a3069}.chroma .se{color:#0a3069}.chroma .sh{color:#0a3069}.chroma .si{color:#0a3069}.chroma .sx{color:#0a3069}.chroma .sr{color:#0a3069}.chroma .s1{color:#0a3069}.chroma .ss{color:#032f62}.chroma .m{color:#0550ae}.chroma .mb{color:#0550ae}.chroma .mf{color:#0550ae}.chroma .mh{color:#0550ae}.chroma .mi{color:#0550ae}.chroma .il{color:#0550ae}.chroma .mo{color:#0550ae}.chroma .o{color:#0550ae}.chroma .ow{color:#cf222e}.chroma .p{color:#1f2328}.chroma .c{color:#6e7781;font-style:italic}.chroma .ch{color:#6e7781;font-style:italic}.chroma .cm{color:#6e7781;font-style:italic}.chroma .c1{color:#6e7781;font-style:italic}.chroma .cs{color:#6e7781;font-style:italic}.chroma .cp{color:#6e7781}.chroma .cpf{color:#6e7781}.chroma .gd{color:#82071e;background-color:#ffebe9}.chroma .ge{font-style:italic}.chroma .gi{color:#116329;background-color:#dafbe1}.chroma .go{color:#1f2328}.chroma .gl{text-decoration:underline}.chroma .gs{font-weight:700}.chroma .w{color:#f6f8fa}@media screen and (max-width:768px){.highlight{max-width:100%;width:100%;overflow-x:auto}.highlight table,.highlight .lntable{width:auto;min-width:100%;table-layout:auto}.highlight .lntd:first-child{width:2.5rem;min-width:2.5rem}.highlight .lnt,.highlight .ln{padding:0 .5rem;font-size:inherit}code{font-size:.75rem}.highlight .lntd:first-child pre code{padding:.75rem 0}.highlight .lntd:last-child pre code{padding:.75rem}}</style><link rel=icon type=image/png href=/icons/favicon-96x96.png sizes=96x96><link rel=icon type=image/svg+xml href=/icons/favicon.svg><link rel="shortcut icon" href=/icons/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-title content="Philipp D. Dubach - Macro & Tech Thought Leadership"><link rel=manifest href=/icons/site.webmanifest><meta name=theme-color content="#2c3e50"><meta name=msapplication-TileColor content="#2c3e50"><meta property="og:title" content="The Tech behind this Site"><meta property="og:description" content="Technical guide to implementing responsive images in Hugo using Cloudflare's CDN and custom shortcodes for optimized WebP delivery."><meta property="og:type" content="article"><meta property="og:url" content="https://philippdubach.com/posts/the-tech-behind-this-site/"><meta property="og:site_name" content="Philipp D. Dubach - Macro & Tech Thought Leadership"><meta property="og:locale" content="en_US"><meta property="og:logo" content="https://philippdubach.com/icons/favicon.ico"><meta property="og:image" content="https://static.philippdubach.com/ograph/ograph-projects.jpg"><meta property="og:image:secure_url" content="https://static.philippdubach.com/ograph/ograph-projects.jpg"><meta property="og:image:url" content="https://static.philippdubach.com/ograph/ograph-projects.jpg"><meta property="og:image:type" content="image/jpeg"><meta property="article:published_time" content="2024-01-15T00:00:00Z"><meta property="article:modified_time" content="2024-01-15T00:00:00Z"><meta property="article:section" content="posts"><meta property="article:tag" content="Project"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="The Tech behind this Site"><meta name=twitter:description content="Technical guide to implementing responsive images in Hugo using Cloudflare's CDN and custom shortcodes for optimized WebP delivery."><meta name=twitter:image content="https://static.philippdubach.com/ograph/ograph-projects.jpg"><meta name=twitter:image:src content="https://static.philippdubach.com/ograph/ograph-projects.jpg"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/philippdubach.com\/"},{"@type":"ListItem","position":2,"name":"Posts","item":"https:\/\/philippdubach.com\/posts/"},{"@type":"ListItem","position":3,"name":"The Tech behind this Site","item":"https:\/\/philippdubach.com\/posts\/the-tech-behind-this-site\/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"The Tech behind this Site","name":"The Tech behind this Site","description":"Technical guide to implementing responsive images in Hugo using Cloudflare\u0027s CDN and custom shortcodes for optimized WebP delivery.","keywords":["Hugo static site","responsive images","Cloudflare image CDN","Hugo shortcode","WebP optimization","image resizing","R2 bucket","static site generation","markdown syntax","picture element","image transformations","mobile optimization","web performance"],"articleBody":"\"Similar to how Simon Willison describes his difficulties managing images for his approach to running a link blog I found it hard to remain true to pure markdown syntax but have images embedded in a responsive way on this site.\\nMy current pipeline is as follows: I host my all my images in a R2 bucket and serve them from static.philippdubach.com. I use Cloudflares\\u0026rsquo;s image resizing CDN do I never have to worry about serving images in appropriate size or format. I basically just upload them with the highes possible quality and Cloudflare takes care of the rest.\\nSince the site runs on Hugo, I needed a solution that would work within this static site generation workflow. Pure markdown syntax like ![alt](url) is clean and portable, but it doesn\\u0026rsquo;t give me the responsive image capabilities I was looking for.\\nThe solution I settled on was creating a Hugo shortcode that leverages Cloudflare\\u0026rsquo;s image transformations while maintaining a simple, markdown-like syntax. The shortcode generates a \\u0026lt;picture\\u0026gt; element with multiple \\u0026lt;source\\u0026gt; tags, each targeting different screen sizes and serving WebP format. Here\\u0026rsquo;s how it works: instead of writing standard markdown image syntax, I use {{ img src=\\u0026quot;image.jpg\\u0026quot; alt=\\u0026quot;Description\\u0026quot; }} in my posts. Behind the scenes, the shortcode constructs URLs for different breakpoints. This means I upload one high-quality image, but users receive perfectly sized versions - a 320px wide WebP for mobile users, a 1600px version for desktop, and everything in between. The shortcode defaults to displaying images at 80% width and centered, but I can override this with a width parameter when needed. It\\u0026rsquo;s a nice compromise between the simplicity of markdown and the power of modern responsive image techniques. The syntax remains clean and the performance benefits are substantial - especially important since images are often the heaviest assets on any webpage.\\n(May 2025) Update: Completed migration to a fully custom Hugo build. Originally started with a fork of hugo-blog-awesome, but I\\u0026rsquo;ve since rebuilt it from scratch.\\n(June 2025) Update: Added LaTeX math rendering using MathJax 3. Created a minimal partial template that only loads the MathJax library on pages that actually contain LaTeX expressions.\\n(June 2025) Update II: Enhanced SEO capabilities with comprehensive metadata support. Built custom Open Graph integration that automatically generates social media previews, plus added per-post keyword management.\\n(November 2025) Update: Added new shortcode to embedd html tables as well as updated my image shortcode to add lightbox support on images.\\n(December 2025) Update: Completed a full security, stability, and performance audit. Fixed SEO issues: resolved multiple H1 tags per page by changing sidebar title from \\u0026lt;h1\\u0026gt; to \\u0026lt;div\\u0026gt;, added seoTitle frontmatter support for pages with long titles, and added meta descriptions to archive pages. Hardened Content Security Policy with frame-ancestors directive. Added preconnect hints for external domains (gc.zgo.at, static.philippdubach.com). Removed unused legacy meta partials.\\n(December 2025) Update II: Added one-click short link sharing via YOURLS integration. Click the ∞ symbol next to read time to generate a pdub.click short URL and copy it to clipboard. Uses JSONP for cross-origin compatibility with minimal inline JavaScript (~500 bytes).\\n(December 2025) Update III: Integrated email newsletter subscription using a Cloudflare Workers API backed by Workers KV (plus R2 for hosting the newsletter HTML). The subscribe form submits to a serverless endpoint that validates emails, stores subscribers, and applies rate limiting + basic spam protection. The worker also triggers a welcome email via Resend.\\n(December 2025) Update IV: Added syntax-highlighted code blocks with line numbers using Hugo\\u0026rsquo;s built-in Chroma highlighter. Configured lineNumbersInTable = true for a clean two-column layout—line numbers in a gray sidebar, code content in the main area with horizontal scroll for long lines. GitHub-inspired color theme with proper styling for keywords, strings, comments, and functions.\\n\"","wordCount":619,"inLanguage":"en","image":"https:\/\/static.philippdubach.com\/ograph\/ograph-projects.jpg","datePublished":"2024-01-15T00:00:00Z","dateModified":"2024-01-15T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/philippdubach.com\/posts\/the-tech-behind-this-site\/"},"publisher":{"@type":"Organization","name":"Philipp D. Dubach | Quantitative Finance \u0026 AI Strategy","logo":{"@type":"ImageObject","url":"https:\/\/philippdubach.com\/icons/favicon.ico"}},"author":{"@type":"Person","name":"Philipp D. Dubach"}}</script></head><body class=linkblog><a href=#main-content class=skip-link>Skip to main content</a><div class=container><aside class=sidebar role=complementary aria-label="Site navigation and information"><div class=sidebar-content><div class=site-header><div class=site-title><a href=https://philippdubach.com/ aria-label="Home - Philipp D. Dubach | Quantitative Finance & AI Strategy">Philipp D. Dubach | Quantitative Finance & AI Strategy</a></div><p class=site-description>Exploring the intersection of Macroeconomics, Quantitative Finance, and AI infrastructure. Analysis of LLM unit economics, global monetary frameworks, and systemic liquidity.</p></div><nav class=navigation aria-label="Main navigation"><ul><li><a href=/>Home</a></li><li><a href=/projects/>Projects</a></li><li><a href=/research/>Research</a></li><li><a href=/about/>About</a></li><li><a href=/posts/>Archive</a></li><li><a href=/subscribe>Subscribe</a></li></ul></nav><div class=social-links aria-label="Social media links"><a href=https://github.com/philippdubach target=_blank rel=noopener aria-label="GitHub profile (opens in new tab)">GitHub</a>
<a href=mailto:info@philippdubach.com aria-label="Send email">Email</a></div></div></aside><main id=main-content class=content role=main><article class="post single"><header class=post-header><h1 class=post-title>The Tech behind this Site</h1><div class=post-meta><time datetime=2024-01-15T00:00:00Z>January 15, 2024
</time>• 700 words
• 3 min read
• <a href=# id=share-link title="Copy short link" aria-label="Copy short link" style=text-decoration:none>∞</a>
<span id=share-status></span></div></header><div class=post-content><p>Similar to how Simon Willison describes his difficulties managing images for his <a href=https://simonwillison.net/2024/Dec/22/link-blog/>approach to running a link blog</a> I found it hard to remain true to pure markdown syntax but have images embedded in a responsive way on this site.</p><p>My current pipeline is as follows: I host my all my images in a R2 bucket and serve them from <code>static.philippdubach.com</code>. I use Cloudflares&rsquo;s image resizing CDN do I never have to worry about serving images in appropriate size or format. I basically just upload them with the highes possible quality and Cloudflare takes care of the rest.</p><p>Since the site runs on Hugo, I needed a solution that would work within this static site generation workflow. Pure markdown syntax like <code>![alt](url)</code> is clean and portable, but it doesn&rsquo;t give me the responsive image capabilities I was looking for.</p><p>The solution I settled on was creating a <a href=https://gist.github.com/philippdubach/167189c7090c6813c5110c467cb5ebe9>Hugo shortcode</a> that leverages Cloudflare&rsquo;s image transformations while maintaining a simple, markdown-like syntax.
The shortcode generates a <code>&lt;picture></code> element with multiple <code>&lt;source></code> tags, each targeting different screen sizes and serving WebP format. Here&rsquo;s how it works: instead of writing standard markdown image syntax, I use <code>{{ img src="image.jpg" alt="Description" }}</code> in my posts. Behind the scenes, the shortcode constructs URLs for different breakpoints. This means I upload one high-quality image, but users receive perfectly sized versions - a 320px wide WebP for mobile users, a 1600px version for desktop, and everything in between. The shortcode defaults to displaying images at 80% width and centered, but I can override this with a width parameter when needed. It&rsquo;s a nice compromise between the simplicity of markdown and the power of modern responsive image techniques. The syntax remains clean and the performance benefits are substantial - especially important since images are often the heaviest assets on any webpage.</p><p><em>(May 2025) Update:</em>
Completed migration to a fully custom Hugo build. Originally started with a fork of <a href=https://github.com/hugo-sid/hugo-blog-awesome>hugo-blog-awesome</a>, but I&rsquo;ve since rebuilt it from scratch.</p><p><em>(June 2025) Update:</em>
Added LaTeX math rendering using <a href=https://github.com/mathjax/MathJax-src>MathJax 3</a>. Created a <a href=https://gist.github.com/philippdubach/42ef6e05f5c44b76ef3f66f27a17c41e>minimal partial template</a> that only loads the MathJax library on pages that actually contain LaTeX expressions.</p><p><em>(June 2025) Update II:</em>
Enhanced SEO capabilities with comprehensive metadata support. Built custom <a href=https://gist.github.com/philippdubach/39838f8e9e1b9fb085947a6b92062e0a>Open Graph integration</a> that automatically generates social media previews, plus added per-post keyword management.</p><p><em>(November 2025) Update:</em>
Added new <a href=https://gist.github.com/philippdubach/b703005536d6030c87e17d21cb0d430b>shortcode to embedd html tables</a> as well as updated my <a href=https://gist.github.com/philippdubach/167189c7090c6813c5110c467cb5ebe9>image shortcode</a> to add lightbox support on images.</p><p><em>(December 2025) Update:</em>
Completed a full security, stability, and performance audit. Fixed SEO issues: resolved multiple H1 tags per page by changing sidebar title from <code>&lt;h1></code> to <code>&lt;div></code>, added <code>seoTitle</code> frontmatter support for pages with long titles, and added meta descriptions to archive pages. Hardened Content Security Policy with <code>frame-ancestors</code> directive. Added preconnect hints for external domains (gc.zgo.at, static.philippdubach.com). Removed unused legacy meta partials.</p><p><em>(December 2025) Update II:</em>
Added one-click short link sharing via <a href=https://yourls.org/>YOURLS</a> integration. Click the ∞ symbol next to read time to generate a pdub.click short URL and copy it to clipboard. Uses JSONP for cross-origin compatibility with minimal inline JavaScript (~500 bytes).</p><p><em>(December 2025) Update III:</em>
<a href=/posts/building-a-no-tracking-newsletter-from-markdown-to-distribution/>Integrated email newsletter subscription</a> using a Cloudflare Workers API backed by Workers KV (plus R2 for hosting the newsletter HTML). The subscribe form submits to a serverless endpoint that validates emails, stores subscribers, and applies rate limiting + basic spam protection. The worker also triggers a welcome email via Resend.</p><p><em>(December 2025) Update IV:</em>
Added syntax-highlighted code blocks with line numbers using Hugo&rsquo;s built-in Chroma highlighter. Configured <code>lineNumbersInTable = true</code> for a clean two-column layout—line numbers in a gray sidebar, code content in the main area with horizontal scroll for long lines. GitHub-inspired color theme with proper styling for keywords, strings, comments, and functions.</p></div></article><footer class=feedback-footer><p>Have feedback, comments, or ideas? <a href=mailto:info@philippdubach.com>I'd love to hear from you</a>.</p><p class=latest-post>Latest: <a href=/posts/bitcoin-security/>Bitcoin Security</a></p><p class=most-read id=top-post-week style=min-height:1.5em></p></footer><script>(function(){var e,n,t=document.getElementById("top-post-week");if(t&&fetch("https://weekly-top-goatcounter-api.philippd.workers.dev").then(function(e){return e.ok?e.json():Promise.reject()}).then(function(e){if(e.hits&&e.hits.length>0){var n=e.hits[0];t.innerHTML='Most read: <a href="'+n.path+'">'+n.title.replace(" - philippdubach.com","")+"</a>"}else t.remove()}).catch(function(){t.remove()}),n=document.getElementById("share-link"),e=document.getElementById("share-status"),!n)return;n.addEventListener("click",function(t){t.preventDefault(),e.textContent="...";var s,n=window.location.href;navigator.clipboard&&navigator.clipboard.write&&typeof ClipboardItem!="undefined"?(s=new ClipboardItem({"text/plain":fetch("https://pdub.click/yourls-api.php?signature=4807288869&action=shorturl&format=json&url="+encodeURIComponent(n)).then(function(e){return e.json()}).then(function(e){var t=e.shorturl||"";return new Blob([t],{type:"text/plain"})}).catch(function(){return new Blob([""],{type:"text/plain"})})}),navigator.clipboard.write([s]).then(function(){e.textContent="url copied",setTimeout(function(){e.textContent=""},2e3)}).catch(function(){e.textContent="error",setTimeout(function(){e.textContent=""},2e3)})):fetch("https://pdub.click/yourls-api.php?signature=4807288869&action=shorturl&format=json&url="+encodeURIComponent(n)).then(function(e){return e.json()}).then(function(t){var n=t.shorturl;n&&navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(n).then(function(){e.textContent="url copied",setTimeout(function(){e.textContent=""},2e3)}).catch(function(){e.textContent=n,setTimeout(function(){e.textContent=""},4e3)}):n?(e.textContent=n,setTimeout(function(){e.textContent=""},4e3)):(e.textContent="error",setTimeout(function(){e.textContent=""},2e3))}).catch(function(){e.textContent="error",setTimeout(function(){e.textContent=""},2e3)})})})()</script></main></div><script>window.goatcounter=window.goatcounter||{},document.referrer&&document.referrer.includes("pdub.click")&&(window.goatcounter.no_onload=!1)</script><script data-goatcounter=https://philippdubach.goatcounter.com/count async src=https://gc.zgo.at/count.js></script></body></html>