<!doctype html><html lang=en-us><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=Content-Security-Policy content="default-src 'self'; script-src 'self' 'unsafe-inline' https://gc.zgo.at https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://philippdubach.goatcounter.com https://weekly-top-goatcounter-api.philippd.workers.dev https://newsletter-api.philippd.workers.dev https://gc.zgo.at https://pdub.click; frame-ancestors 'self'; base-uri 'self';"><link rel=preconnect href=https://gc.zgo.at crossorigin><link rel=preconnect href=https://static.philippdubach.com crossorigin><link rel=preconnect href=https://pdub.click crossorigin><link rel=preconnect href=https://newsletter-api.philippd.workers.dev crossorigin><link rel=dns-prefetch href=https://gc.zgo.at><link rel=dns-prefetch href=https://static.philippdubach.com><link rel=dns-prefetch href=https://pdub.click><link rel=dns-prefetch href=https://newsletter-api.philippd.workers.dev><meta name=robots content="index, follow"><title>Building a No-Tracking Newsletter from Markdown to Distribution - philippdubach.com</title><meta name=description content="Building a privacy-focused newsletter from Markdown to HTML with Cloudflare Workers, KV storage, and Resend API."><meta name=keywords content="newsletter system,Cloudflare Workers,email API,privacy-focused email,markdown to html,KV storage,Resend API,self-hosted newsletter,no-tracking email,developer newsletter"><meta name=author content="Philipp Dubach"><meta name=generator content="Hugo 0.149.0"><link rel=canonical href=http://localhost:1313/2025/12/24/building-a-no-tracking-newsletter-from-markdown-to-distribution/><style>*{margin:0;padding:0;box-sizing:border-box}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}body{font-family:helvetica neue,Helvetica,Arial,segoe ui,sans-serif;padding-top:90px;line-height:1.6;color:#333;background-color:#ffff}blockquote{margin:1em 0;padding-left:1em;border-left:2px solid #ccc;color:#666}blockquote p{margin:.5em 0}.container{display:flex;max-width:1200px;margin:0 auto;min-height:100vh}.sidebar{width:200px;background-color:#ffff;padding:1.5rem;border-right:0 solid #e9ecef;position:sticky;top:0;height:100vh;overflow-y:auto}.site-title a{text-decoration:none;color:#333;font-size:1.5rem;font-weight:700}.site-description{color:#666;margin:.5rem 0 2rem;font-size:.9rem}.navigation ul{list-style:none;margin-bottom:2rem}.navigation li{margin-bottom:.5rem}.navigation a{text-decoration:none;color:#007acc;font-weight:500}.navigation a:hover{text-decoration:underline}.social-links a{display:inline-block;margin-right:1rem;color:#666;text-decoration:none;font-size:.9rem}.social-links a:hover{color:#007acc}.content{flex:1;padding:2rem;padding-bottom:3rem;max-width:800px}.posts{max-width:90%}.post{margin-bottom:1rem;padding-bottom:1rem}.post:last-child{border-bottom:none}.post-title{margin-bottom:.5rem;line-height:1.3}.post-title a{text-decoration:none;color:#333;font-size:1.25rem;font-weight:600;line-height:1.3}.post-title a:hover{color:#007acc}.post-meta{font-size:.85rem;color:#666;margin-bottom:0}.post-meta a{color:#007acc;text-decoration:none}.post-meta a:hover{text-decoration:underline}.post-content{line-height:1.7}.post-content p{margin-bottom:1rem}.post-content p:last-child{margin-bottom:.5rem}.post-content a{color:#007acc;text-decoration:none}.post-content a:hover{text-decoration:underline}.project-tag{background-color:#e9ecef;color:#495057;padding:2px 6px;border-radius:3px;font-size:9px;font-weight:500;text-transform:uppercase;letter-spacing:.3px;margin-left:6px;display:inline-block;vertical-align:middle;border:1px solid #dee2e6}.archive{max-width:90%}.year h2{margin:2rem 0 1rem;color:#333;font-size:1.5rem}.archive-item{display:flex;margin-bottom:.75rem;align-items:baseline}.archive-meta{width:60px;flex-shrink:0;font-size:.85rem;color:#666}.archive-title{flex:1}.archive-title a{text-decoration:none;color:#333}.archive-title a:hover{color:#007acc}@supports(text-wrap:balance){.archive-title{text-wrap:balance}}.single .post-title{font-size:1.5rem;margin-bottom:1rem;line-height:1.3}.pagination{margin-top:2rem;margin-bottom:1rem;text-align:center;padding-top:2rem;padding-bottom:1rem;border-top:1px solid #e9ecef}.pagination a{color:#007acc;text-decoration:none;font-weight:500}.pagination a:hover{text-decoration:underline}.img-lightbox{cursor:pointer;transition:opacity .2s}.img-lightbox:hover{opacity:.9}.lightbox-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#f8f9fa;z-index:9999;cursor:pointer;align-items:center;justify-content:center;padding:2rem;box-sizing:border-box}.lightbox-overlay:target{display:flex}.lightbox-overlay img{max-width:95%;max-height:95%;object-fit:contain;background:#f8f9fa}.feedback-footer{margin-top:.75rem;padding-top:.75rem;border-top:1px solid #e9ecef;text-align:center;color:#666;font-size:.9rem;margin-bottom:2rem}.feedback-footer p{margin:0;line-height:1.6}.feedback-footer a{color:#007acc;text-decoration:none}.feedback-footer a:hover{text-decoration:underline}#newsletter-form-container{display:flex;flex-direction:column;align-items:center;margin:2rem 0}.newsletter-form{margin:0;display:flex;gap:.5rem;align-items:center;max-width:300px;width:100%}.form-group{flex:1;min-width:0}.newsletter-input{width:100%;padding:.5rem .75rem;font-size:.9rem;border:1px solid #e9ecef;border-radius:0;font-family:inherit;color:#333;background-color:#fff;transition:border-color .2s}.newsletter-input:focus{outline:none;border-color:#333}.newsletter-button{padding:.5rem 1rem;font-size:.9rem;background-color:transparent;color:#333;border:1px solid #333;border-radius:0;cursor:pointer;font-family:inherit;font-weight:400;white-space:nowrap;transition:background-color .2s,color .2s}.newsletter-button:hover:not(:disabled){background-color:#333;color:#fff}.newsletter-button:disabled{opacity:.5;cursor:not-allowed}.subscriber-count{margin:.75rem 0 0;font-size:.85rem;color:#666;text-align:center}.newsletter-message{margin:1.5rem 0 0;padding:0;border-radius:0;line-height:1.6;text-align:center;max-width:300px;width:100%}.newsletter-message-success{background-color:transparent;color:#333;border:none}.newsletter-message-error{background-color:transparent;color:#666;border:none}.newsletter-message a{color:#007acc;text-decoration:none}.newsletter-message a:hover{text-decoration:underline}.newsletter-archive{margin:2rem 0}.newsletter-list{list-style:none;padding:0}.newsletter-item{margin-bottom:1rem;padding-bottom:.75rem;border-bottom:1px solid #e9ecef}.newsletter-item:last-child{border-bottom:none}.newsletter-date{color:#666;font-size:.9rem;margin-right:.5rem;min-width:120px;display:inline-block}.newsletter-item a{color:#333;text-decoration:none}.newsletter-item a:hover{color:#007acc;text-decoration:underline}@media screen and (max-width:768px){html{font-size:8px !important}body{font-size:1rem !important}.sidebar{width:100px !important;padding:.75rem !important}.container{max-width:600px !important;margin:0 20px !important}.content{max-width:400px !important;padding:1rem !important;padding-bottom:.5rem !important}.pagination{margin-bottom:1.5rem !important;padding-bottom:1.5rem !important}.project-tag{padding:1px 3px !important;border-radius:1.5px !important;font-size:4.5px !important;letter-spacing:.15px !important;margin-left:3px !important}.archive-meta{width:30px !important}.post-title,.post-title a,.single .post-title{line-height:1.2 !important}.post-content p:last-child{margin-bottom:.25rem !important}.feedback-footer{margin-top:.5rem !important;padding-top:.5rem !important;margin-bottom:1rem !important}#newsletter-form-container{margin:1rem 0 !important}.newsletter-form{max-width:200px !important}.newsletter-message{max-width:200px !important}.newsletter-date{display:block !important;margin-bottom:.25rem !important;min-width:auto !important}}code{font-family:sfmono-regular,Consolas,liberation mono,Menlo,Monaco,monospace;font-size:.875rem;line-height:1.5}p code,li code,td code,h1 code,h2 code,h3 code,h4 code,h5 code,h6 code{background-color:#f6f8fa;padding:.2em .4em;border-radius:4px;font-size:.875em;color:#24292f;word-break:break-word}pre{background-color:#f6f8fa;border-radius:6px;padding:0;margin:1rem 0;overflow:hidden}.highlight{margin:1rem 0;border-radius:6px;overflow:hidden;background-color:#f6f8fa;max-width:100%}.highlight pre{margin:0;background-color:transparent;border-radius:0;overflow-x:auto}.highlight table,.highlight .lntable{width:100%;border-collapse:collapse;border-spacing:0;padding:0;margin:0;border:0;display:table}.highlight table td,.highlight .lntd{padding:0;margin:0;border:0;vertical-align:top}.highlight .lntd:first-child{width:3.5rem;min-width:3.5rem;user-select:none;background-color:#ebedf0;border-right:1px solid #d0d7de}.highlight .lntd:first-child pre{padding:0;margin:0;overflow:hidden}.highlight .lntd:first-child pre code{display:block;padding:1rem 0}.highlight .lnt,.highlight .ln{display:block;padding:0 .75rem;color:#6e7781;text-align:right;font-size:inherit;line-height:inherit;white-space:pre;user-select:none}.highlight .lntd:last-child{overflow-x:auto}.highlight .lntd:last-child pre{padding:0;margin:0;overflow-x:auto}.highlight .lntd:last-child pre code{display:block;white-space:pre;word-wrap:normal;overflow-x:visible;padding:1rem}.chroma .line{display:block;padding:0;margin:0}.chroma .cl{display:block}.chroma .hl{background-color:#fff8c5}.bg{background-color:#f6f8fa}.chroma{background-color:#f6f8fa;color:#1f2328}.chroma .err{color:#cf222e;background-color:transparent}.chroma .k{color:#cf222e}.chroma .kc{color:#cf222e}.chroma .kd{color:#cf222e}.chroma .kn{color:#cf222e}.chroma .kp{color:#cf222e}.chroma .kr{color:#cf222e}.chroma .kt{color:#cf222e}.chroma .na{color:#1f2328}.chroma .nc{color:#1f2328}.chroma .no{color:#0550ae}.chroma .nd{color:#8250df}.chroma .ni{color:#6639ba}.chroma .nl{color:#0550ae;font-weight:700}.chroma .nn{color:#24292e}.chroma .nx{color:#1f2328}.chroma .nt{color:#116329}.chroma .nb{color:#6639ba}.chroma .bp{color:#6a737d}.chroma .nv{color:#953800}.chroma .vc{color:#953800}.chroma .vg{color:#953800}.chroma .vi{color:#953800}.chroma .vm{color:#953800}.chroma .nf{color:#8250df}.chroma .fm{color:#8250df}.chroma .s{color:#0a3069}.chroma .sa{color:#0a3069}.chroma .sb{color:#0a3069}.chroma .sc{color:#0a3069}.chroma .dl{color:#0a3069}.chroma .sd{color:#0a3069}.chroma .s2{color:#0a3069}.chroma .se{color:#0a3069}.chroma .sh{color:#0a3069}.chroma .si{color:#0a3069}.chroma .sx{color:#0a3069}.chroma .sr{color:#0a3069}.chroma .s1{color:#0a3069}.chroma .ss{color:#032f62}.chroma .m{color:#0550ae}.chroma .mb{color:#0550ae}.chroma .mf{color:#0550ae}.chroma .mh{color:#0550ae}.chroma .mi{color:#0550ae}.chroma .il{color:#0550ae}.chroma .mo{color:#0550ae}.chroma .o{color:#0550ae}.chroma .ow{color:#cf222e}.chroma .p{color:#1f2328}.chroma .c{color:#6e7781;font-style:italic}.chroma .ch{color:#6e7781;font-style:italic}.chroma .cm{color:#6e7781;font-style:italic}.chroma .c1{color:#6e7781;font-style:italic}.chroma .cs{color:#6e7781;font-style:italic}.chroma .cp{color:#6e7781}.chroma .cpf{color:#6e7781}.chroma .gd{color:#82071e;background-color:#ffebe9}.chroma .ge{font-style:italic}.chroma .gi{color:#116329;background-color:#dafbe1}.chroma .go{color:#1f2328}.chroma .gl{text-decoration:underline}.chroma .gs{font-weight:700}.chroma .w{color:#f6f8fa}@media screen and (max-width:768px){.highlight .lntd:first-child{width:2.5rem;min-width:2.5rem}.highlight .lnt,.highlight .ln{padding:0 .5rem;font-size:inherit}code{font-size:.75rem}.highlight .lntd:first-child pre code{padding:.75rem 0}.highlight .lntd:last-child pre code{padding:.75rem}}</style><link rel=icon type=image/png href=/icons/favicon-96x96.png sizes=96x96><link rel=icon type=image/svg+xml href=/icons/favicon.svg><link rel="shortcut icon" href=/icons/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-title content="philippdubach.com"><link rel=manifest href=/icons/site.webmanifest><meta name=theme-color content="#2c3e50"><meta name=msapplication-TileColor content="#2c3e50"><meta property="og:title" content="Building a No-Tracking Newsletter from Markdown to Distribution"><meta property="og:description" content="Building a privacy-focused newsletter from Markdown to HTML with Cloudflare Workers, KV storage, and Resend API."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/2025/12/24/building-a-no-tracking-newsletter-from-markdown-to-distribution/"><meta property="og:site_name" content="philippdubach.com"><meta property="og:locale" content="en_US"><meta property="og:logo" content="http://localhost:1313/icons/favicon.ico"><meta property="og:image" content="https://static.philippdubach.com/ograph/ograph-newsletter-setup.jpg"><meta property="og:image:secure_url" content="https://static.philippdubach.com/ograph/ograph-newsletter-setup.jpg"><meta property="og:image:url" content="https://static.philippdubach.com/ograph/ograph-newsletter-setup.jpg"><meta property="og:image:type" content="image/jpeg"><meta property="article:published_time" content="2025-12-24T00:00:00Z"><meta property="article:modified_time" content="2025-12-24T00:00:00Z"><meta property="article:section" content="posts"><meta property="article:tag" content="Project"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Building a No-Tracking Newsletter from Markdown to Distribution"><meta name=twitter:description content="Building a privacy-focused newsletter from Markdown to HTML with Cloudflare Workers, KV storage, and Resend API."><meta name=twitter:image content="https://static.philippdubach.com/ograph/ograph-newsletter-setup.jpg"><meta name=twitter:image:src content="https://static.philippdubach.com/ograph/ograph-newsletter-setup.jpg"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"http:\/\/localhost:1313\/"},{"@type":"ListItem","position":2,"name":"Posts","item":"http:\/\/localhost:1313\/posts/"},{"@type":"ListItem","position":3,"name":"Building a No-Tracking Newsletter from Markdown to Distribution","item":"http:\/\/localhost:1313\/2025\/12\/24\/building-a-no-tracking-newsletter-from-markdown-to-distribution\/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Building a No-Tracking Newsletter from Markdown to Distribution","name":"Building a No-Tracking Newsletter from Markdown to Distribution","description":"Building a privacy-focused newsletter from Markdown to HTML with Cloudflare Workers, KV storage, and Resend API.","keywords":["newsletter system","Cloudflare Workers","email API","privacy-focused email","markdown to html","KV storage","Resend API","self-hosted newsletter","no-tracking email","developer newsletter"],"articleBody":"\" Friends have been asking how they can stay up to date with what I\\u0026rsquo;m working on and keep track of the things I read, write, and share. RSS feeds don\\u0026rsquo;t seem to be en vogue anymore, apparently. So I built a mailing list. What else would you do over the Christmas break?\\nFrom a previous marketing job I knew Mailchimp. Also, every newsletter I unsubscribe from is Mailchimp. I no longer wish to receive these emails. Or obviously Substack. I read Simon Willison\\u0026rsquo;s Newsletter sometimes. And obviously Michael Burry\\u0026rsquo;s $379 Substack. Those are solid options, but I had a clear picture in mind of what I wanted. I wanted only HTML, no tracking (also why I use GoatCounter on my site and not Google Analytics), and full control of the creation and distribution chain from end to end. So I sat down and drew into my notebook, what I always do when I have an idea after a long walk or a hot shower. I then went over to Illustrator (actually Affinity Designer, which I have been happily using since my Creative Cloud subscription ran out, sorry Adobe) and built a quick mockup of my drawing. I fed the mockup to Claude to generate pure HTML. After a few iterations it more or less looked like I wanted it to be.\\nThe architecture: write the newsletter in Markdown (as I do for all of my blog). Render it as HTML. Fetch OpenGraph images from my Cloudflare CDN at the lowest feasible resolution and pull descriptions automatically. Format links with preview cards. Keep some space for freetext at the top and bottom. I built a Python engine that renders my .md files to email-safe HTML. The script handles several things automatically: (1) It fetches OpenGraph metadata for every link using Beautiful Soup, caching results to avoid repeated requests. (2) optimizes images using Cloudflare\\u0026rsquo;s image transformation service. For email, I use 240px width (2x the display size of 120px for retina displays). (3) It generates LinkedIn-style preview cards with images on the left and text on the right. The output is table-based HTML because email clients from 2003 still exist and they\\u0026rsquo;re apparently immortal. Originally I intended to manually copy-paste the HTML into an email and send it out since I did not expect many subscribers at first (or at all). But I had another challenge at hand: how do people sign up?\\nSince I had already been using Cloudflare Workers KV to build an API with historic values of my temperature and humidity sensor at home, I resorted to that. The API is simple. POST to /api/subscribe with an email address, and it gets stored in KV with a timestamp and some metadata.\\nAfter some Copilot iterations (I\\u0026rsquo;m not a security guy, so not sure how I feel about handing all the security and testing to an agent, please reach out if you can help) the Worker includes rate limiting, honeypot fields for spam protection, proper CORS headers, and RFC-compliant email validation.\\nI then wanted to get a confirmation email every time someone signed up. Since SMTP sending over my domain did not work reliably at first, I had to look for other options. Even though I wanted everything self-hosted, I ended up using the Resend API. The API is straightforward:\\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 async function sendWelcomeEmail(subscriberEmail: string, env: Env) { const response = await fetch(\\u0026#39;https://api.resend.com/emails\\u0026#39;, { method: \\u0026#39;POST\\u0026#39;, headers: { \\u0026#39;Authorization\\u0026#39;: `Bearer ${env.RESEND_API_KEY}`, \\u0026#39;Content-Type\\u0026#39;: \\u0026#39;application/json\\u0026#39;, }, body: JSON.stringify({ from: \\u0026#39;Philipp Dubach \\u0026lt;noreply@notifications.philippdubach.com\\u0026gt;\\u0026#39;, to: [subscriberEmail], bcc: [\\u0026#39;info@philippdubach.com\\u0026#39;], subject: \\u0026#39;Welcome to the Newsletter\\u0026#39;, html: `\\u0026lt;p\\u0026gt;Thanks for subscribing!\\u0026lt;/p\\u0026gt;`, }), }); return response.ok; } After implementing this, I figured: why not send a confirmation to the subscriber and a copy to me? Why not use Resend for the whole distribution? (This is not a paid advertisement.) The HTML newsletter I generate goes straight into the email body. No images hosted elsewhere (except for the optimized preview thumbnails). No tracking pixels. No click tracking. The email is just HTML.\\nI also looked at Mailgun and SendGrid before settling on Resend. Mailgun has better deliverability monitoring but a more complex API. SendGrid has more features but felt overengineered for what I needed. Resend\\u0026rsquo;s free tier and simple API won. If you have strong opinions on email APIs, I\\u0026rsquo;m curious to hear them.\\nThe total cost of running this: zero. Cloudflare Workers has a generous free tier. Cloudflare R2 (where the HTML newsletters are hosted) has 10GB free storage. Resend gives 3,000 emails per month. The Python script runs locally or on my Azure instance.\\nYou can find my first newsletter here. The full code for both the newsletter generator and the subscriber API is on GitHub. Needless to say, I would be delighted if we keep in touch through my mailing list:\\nEmail address Subscribe \"","wordCount":813,"inLanguage":"en","image":"https:\/\/static.philippdubach.com\/ograph\/ograph-newsletter-setup.jpg","datePublished":"2025-12-24T00:00:00Z","dateModified":"2025-12-24T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/localhost:1313\/2025\/12\/24\/building-a-no-tracking-newsletter-from-markdown-to-distribution\/"},"publisher":{"@type":"Organization","name":"philippdubach","logo":{"@type":"ImageObject","url":"http:\/\/localhost:1313\/icons/favicon.ico"}},"author":{"@type":"Person","name":"Philipp Dubach"}}</script></head><body class=linkblog><div class=container><aside class=sidebar><div class=sidebar-content><div class=site-header><div class=site-title><a href=http://localhost:1313/>philippdubach</a></div><p class=site-description>Blog about Personal Projects, Articles and Papers on Economics, Finance and Technology</p></div><nav class=navigation><ul><li><a href=/>Home</a></li><li><a href=/projects/>Projects</a></li><li><a href=/research/>Research</a></li><li><a href=/about/>About</a></li><li><a href=/posts/>Archive</a></li><li><a href=/subscribe>Subscribe</a></li></ul></nav><div class=social-links><a href=https://github.com/philippdubach target=_blank rel=noopener>GitHub</a>
<a href=mailto:info@philippdubach.com>Email</a></div></div></aside><main class=content><article class="post single"><header class=post-header><h1 class=post-title>Building a No-Tracking Newsletter from Markdown to Distribution</h1><div class=post-meta><time datetime=2025-12-24T00:00:00Z>December 24, 2025
</time>• 900 words
• 4 min read
• <a href=# id=share-link title="Copy short link" aria-label="Copy short link" style=text-decoration:none>∞</a>
<span id=share-status></span></div></header><div class=post-content><p><a href=#lightbox-Newsletter_Overview2-jpg-0 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/Newsletter_Overview2.jpg 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/Newsletter_Overview2.jpg 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/Newsletter_Overview2.jpg 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/Newsletter_Overview2.jpg 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/Newsletter_Overview2.jpg 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/Newsletter_Overview2.jpg 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/Newsletter_Overview2.jpg 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/Newsletter_Overview2.jpg 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/Newsletter_Overview2.jpg" alt="Screenshot of rendered newsletter showing article preview cards with images and descriptions" loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-Newsletter_Overview2-jpg-0 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/Newsletter_Overview2.jpg" alt="Screenshot of rendered newsletter showing article preview cards with images and descriptions">
</a>Friends have been asking how they can stay up to date with what I&rsquo;m working on and keep track of the things I read, write, and share. RSS feeds don&rsquo;t seem to be en vogue anymore, apparently. So I built a mailing list. What else would you do over the Christmas break?</p><p>From a previous marketing job I knew Mailchimp. Also, every newsletter I unsubscribe from is Mailchimp. I no longer wish to receive these emails.
<a href=#lightbox-unsubscribe2-png-1 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/unsubscribe2.png 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/unsubscribe2.png 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/unsubscribe2.png 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/unsubscribe2.png 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/unsubscribe2.png 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/unsubscribe2.png 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/unsubscribe2.png 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/unsubscribe2.png 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/unsubscribe2.png" alt="Unsubscribe confirmation from Mailchimp newsletters" loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-unsubscribe2-png-1 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/unsubscribe2.png" alt="Unsubscribe confirmation from Mailchimp newsletters">
</a>Or obviously Substack. I read <a href=https://simonw.substack.com>Simon Willison&rsquo;s Newsletter</a> sometimes. And obviously <a href=/2025/11/28/michael-burrys-379-newsletter/>Michael Burry&rsquo;s $379 Substack</a>. Those are solid options, but I had a clear picture in mind of what I wanted. I wanted only HTML, no tracking (also why I use <a href=https://www.goatcounter.com/>GoatCounter</a> on my site and not Google Analytics), and full control of the creation and distribution chain from end to end. So I sat down and drew into my notebook, what I always do when I have an idea after a long walk or a hot shower.
<a href=#lightbox-newsletter_scetch3-jpg-2 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/newsletter_scetch3.jpg 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/newsletter_scetch3.jpg 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/newsletter_scetch3.jpg 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/newsletter_scetch3.jpg 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/newsletter_scetch3.jpg 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/newsletter_scetch3.jpg 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/newsletter_scetch3.jpg 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/newsletter_scetch3.jpg 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/newsletter_scetch3.jpg" alt="Hand-drawn notebook sketch of newsletter architecture showing markdown to HTML to distribution flow" loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-newsletter_scetch3-jpg-2 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/newsletter_scetch3.jpg" alt="Hand-drawn notebook sketch of newsletter architecture showing markdown to HTML to distribution flow">
</a>I then went over to Illustrator (actually <a href=https://affinity.serif.com/en-us/designer/>Affinity Designer</a>, which I have been happily using since my Creative Cloud subscription ran out, sorry Adobe) and built a quick mockup of my drawing. I fed the mockup to Claude to generate pure HTML. After a few iterations it more or less looked like I wanted it to be.</p><p>The architecture: write the newsletter in Markdown (as I do for all of <a href=/about>my blog</a>). Render it as HTML. Fetch OpenGraph images from my Cloudflare CDN at the lowest feasible resolution and pull descriptions automatically. Format links with preview cards. Keep some space for freetext at the top and bottom.
<a href=#lightbox-newsletter_architecture2-png-3 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/newsletter_architecture2.png 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/newsletter_architecture2.png 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/newsletter_architecture2.png 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/newsletter_architecture2.png 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/newsletter_architecture2.png 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/newsletter_architecture2.png 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/newsletter_architecture2.png 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/newsletter_architecture2.png 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/newsletter_architecture2.png" alt="Flowchart showing newsletter pipeline: Write Markdown, Render HTML, Host on R2, Fetch KV for subscribers, Send via Resend API" loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-newsletter_architecture2-png-3 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/newsletter_architecture2.png" alt="Flowchart showing newsletter pipeline: Write Markdown, Render HTML, Host on R2, Fetch KV for subscribers, Send via Resend API">
</a>I built a <a href=https://github.com/philippdubach/newsletter-generator>Python engine</a> that renders my <code>.md</code> files to email-safe HTML. The script handles several things automatically: (1) It fetches OpenGraph metadata for every link using Beautiful Soup, caching results to avoid repeated requests. (2) optimizes images using Cloudflare&rsquo;s image transformation service. For email, I use 240px width (2x the display size of 120px for retina displays). (3) It generates LinkedIn-style preview cards with images on the left and text on the right. The output is table-based HTML because email clients from 2003 still exist and they&rsquo;re apparently immortal.
<a href=#lightbox-Newsletter_Overview-png-4 style="display:block;width:80%;margin:0 auto;padding:1rem 0;text-decoration:none"><picture class=img-lightbox><source media="(max-width: 768px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=320,quality=80,format=webp/Newsletter_Overview.png 320w,
https://static.philippdubach.com/cdn-cgi/image/width=480,quality=80,format=webp/Newsletter_Overview.png 480w,
https://static.philippdubach.com/cdn-cgi/image/width=640,quality=80,format=webp/Newsletter_Overview.png 640w" sizes=80vw><source media="(max-width: 1024px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=768,quality=80,format=webp/Newsletter_Overview.png 768w,
https://static.philippdubach.com/cdn-cgi/image/width=1024,quality=80,format=webp/Newsletter_Overview.png 1024w" sizes=80vw><source media="(min-width: 1025px)" srcset="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80,format=webp/Newsletter_Overview.png 1200w,
https://static.philippdubach.com/cdn-cgi/image/width=1600,quality=80,format=webp/Newsletter_Overview.png 1600w,
https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=80,format=webp/Newsletter_Overview.png 2000w" sizes=80vw><img src="https://static.philippdubach.com/cdn-cgi/image/width=1200,quality=80/Newsletter_Overview.png" alt="Screenshot of rendered newsletter showing article preview cards with images and descriptions" loading=lazy style=width:100%;height:auto;display:block>
</picture></a><a href=#_ id=lightbox-Newsletter_Overview-png-4 class=lightbox-overlay><img src="https://static.philippdubach.com/cdn-cgi/image/width=2000,quality=90,format=webp/Newsletter_Overview.png" alt="Screenshot of rendered newsletter showing article preview cards with images and descriptions">
</a>Originally I intended to manually copy-paste the HTML into an email and send it out since I did not expect many subscribers at first (or at all). But I had another challenge at hand: how do people sign up?</p><p>Since I had already been using <a href=https://developers.cloudflare.com/kv/>Cloudflare Workers KV</a> to build an API with historic values of my temperature and humidity sensor at home, I resorted to that. The API is simple. POST to <code>/api/subscribe</code> with an email address, and it gets stored in KV with a timestamp and some metadata.</p><p>After some Copilot iterations (I&rsquo;m not a security guy, so not sure how I feel about handing all the security and testing to an agent, please reach out if you can help) the Worker includes rate limiting, honeypot fields for spam protection, proper CORS headers, and RFC-compliant email validation.</p><p>I then wanted to get a confirmation email every time someone signed up. Since SMTP sending over my domain did not work reliably at first, I had to look for other options. Even though I wanted everything self-hosted, I ended up using the <a href=https://resend.com/>Resend API</a>. The API is straightforward:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>sendWelcomeEmail</span><span class=p>(</span><span class=nx>subscriberEmail</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>env</span>: <span class=kt>Env</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=k>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=s1>&#39;https://api.resend.com/emails&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;POST&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;Authorization&#39;</span><span class=o>:</span> <span class=sb>`Bearer </span><span class=si>${</span><span class=nx>env</span><span class=p>.</span><span class=nx>RESEND_API_KEY</span><span class=si>}</span><span class=sb>`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;application/json&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=nx>body</span>: <span class=kt>JSON.stringify</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=kr>from</span><span class=o>:</span> <span class=s1>&#39;Philipp Dubach &lt;noreply@notifications.philippdubach.com&gt;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>to</span><span class=o>:</span> <span class=p>[</span><span class=nx>subscriberEmail</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nx>bcc</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;info@philippdubach.com&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nx>subject</span><span class=o>:</span> <span class=s1>&#39;Welcome to the Newsletter&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>html</span><span class=o>:</span> <span class=sb>`&lt;p&gt;Thanks for subscribing!&lt;/p&gt;`</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>}),</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>response</span><span class=p>.</span><span class=nx>ok</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><br><p>After implementing this, I figured: why not send a confirmation to the subscriber and a copy to me? Why not use Resend for the whole distribution? (This is not a paid advertisement.) The HTML newsletter I generate goes straight into the email body. No images hosted elsewhere (except for the optimized preview thumbnails). No tracking pixels. No click tracking. The email is just HTML.</p><p>I also looked at <a href=https://www.mailgun.com/>Mailgun</a> and <a href=https://sendgrid.com/>SendGrid</a> before settling on Resend. Mailgun has better deliverability monitoring but a more complex API. SendGrid has more features but felt overengineered for what I needed. Resend&rsquo;s free tier and simple API won. If you have strong opinions on email APIs, I&rsquo;m curious to hear them.</p><p>The total cost of running this: zero. Cloudflare Workers has a generous free tier. Cloudflare R2 (where the HTML newsletters are hosted) has 10GB free storage. Resend gives 3,000 emails per month. The Python script runs locally or on my Azure instance.</p><p>You can find <a href=https://static.philippdubach.com/newsletter/newsletter-2025-12.html>my first newsletter here</a>. The full code for both the <a href=https://github.com/philippdubach/newsletter-generator>newsletter generator</a> and the <a href=https://github.com/philippdubach/newsletter-api>subscriber API</a> is on GitHub. Needless to say, I would be delighted if we keep in touch through my mailing list:</p><div id=newsletter-form-container><form id=newsletter-form class=newsletter-form><div class=form-group><label for=email class=visually-hidden>Email address</label>
<input type=email id=email name=email placeholder=your@email.com required class=newsletter-input aria-label="Email address"></div><button type=submit class=newsletter-button>Subscribe</button></form><p id=subscriber-count class=subscriber-count style=display:none></p><div id=newsletter-message class=newsletter-message style=display:none></div></div><script>(function(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e();function e(){var t=document.getElementById("newsletter-form"),s=document.getElementById("newsletter-message"),o=document.getElementById("email"),e=document.getElementById("subscriber-count");if(e&&fetch("https://newsletter-api.philippd.workers.dev/api/subscriber-count").then(function(e){return e.json()}).then(function(t){t.display&&(e.textContent="Join "+t.display+" readers",e.style.display="block")}).catch(function(){}),!t)return;t.addEventListener("submit",function(s){s.preventDefault();var i,r,a=o.value.trim();if(!a)return;if(r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,!r.test(a)){n("Please enter a valid email address.","error");return}i=t.querySelector('button[type="submit"]'),i.disabled=!0,i.textContent="Subscribing...",fetch("https://newsletter-api.philippd.workers.dev/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}).then(function(e){return e.json()}).then(function(s){s.success?(t.style.display="none",e&&(e.style.display="none"),n("Thanks for subscribing! You'll receive the next newsletter in your inbox.","success")):(n(s.error||"Something went wrong. Please try again.","error"),i.disabled=!1,i.textContent="Subscribe")}).catch(function(){n("Something went wrong. Please try again later.","error"),i.disabled=!1,i.textContent="Subscribe"})});function n(e,t){s.innerHTML=e,s.className="newsletter-message newsletter-message-"+t,s.style.display="block"}}})()</script></div></article><footer class=feedback-footer><p>Have feedback, comments, or ideas? <a href=mailto:info@philippdubach.com>I'd love to hear from you</a>.</p><p class=latest-post>Latest: <a href=/2025/12/27/book-review-why-machines-learn/>Book Review: Why Machines Learn</a></p><p class=most-read id=top-post-week style=min-height:1.5em></p></footer><script>(function(){var e,n,t=document.getElementById("top-post-week");if(t&&fetch("https://weekly-top-goatcounter-api.philippd.workers.dev").then(function(e){return e.ok?e.json():Promise.reject()}).then(function(e){if(e.hits&&e.hits.length>0){var n=e.hits[0];t.innerHTML='Most read: <a href="'+n.path+'">'+n.title.replace(" - philippdubach.com","")+"</a>"}else t.remove()}).catch(function(){t.remove()}),n=document.getElementById("share-link"),e=document.getElementById("share-status"),!n)return;n.addEventListener("click",function(t){t.preventDefault(),e.textContent="...";var s,n=window.location.href;navigator.clipboard&&navigator.clipboard.write&&typeof ClipboardItem!="undefined"?(s=new ClipboardItem({"text/plain":fetch("https://pdub.click/yourls-api.php?signature=4807288869&action=shorturl&format=json&url="+encodeURIComponent(n)).then(function(e){return e.json()}).then(function(e){var t=e.shorturl||"";return new Blob([t],{type:"text/plain"})}).catch(function(){return new Blob([""],{type:"text/plain"})})}),navigator.clipboard.write([s]).then(function(){e.textContent="url copied",setTimeout(function(){e.textContent=""},2e3)}).catch(function(){e.textContent="error",setTimeout(function(){e.textContent=""},2e3)})):fetch("https://pdub.click/yourls-api.php?signature=4807288869&action=shorturl&format=json&url="+encodeURIComponent(n)).then(function(e){return e.json()}).then(function(t){var n=t.shorturl;n&&navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(n).then(function(){e.textContent="url copied",setTimeout(function(){e.textContent=""},2e3)}).catch(function(){e.textContent=n,setTimeout(function(){e.textContent=""},4e3)}):n?(e.textContent=n,setTimeout(function(){e.textContent=""},4e3)):(e.textContent="error",setTimeout(function(){e.textContent=""},2e3))}).catch(function(){e.textContent="error",setTimeout(function(){e.textContent=""},2e3)})})})()</script></main></div></body></html>